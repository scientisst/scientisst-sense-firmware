<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Scientisst: bt.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Scientisst
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">bt.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>BT communication file with some general functions also.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="bt_8h_source.html">bt.h</a>&quot;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="com_8h_source.html">com.h</a>&quot;</code><br />
<code>#include &quot;esp_bt.h&quot;</code><br />
<code>#include &quot;esp_bt_device.h&quot;</code><br />
<code>#include &quot;esp_bt_main.h&quot;</code><br />
<code>#include &quot;esp_gap_bt_api.h&quot;</code><br />
<code>#include &quot;esp_log.h&quot;</code><br />
<code>#include &quot;esp_spp_api.h&quot;</code><br />
<code>#include &quot;esp_system.h&quot;</code><br />
<code>#include &quot;freertos/FreeRTOS.h&quot;</code><br />
<code>#include &quot;freertos/task.h&quot;</code><br />
<code>#include &quot;<a class="el" href="macros_8h_source.html">macros.h</a>&quot;</code><br />
<code>#include &quot;nvs.h&quot;</code><br />
<code>#include &quot;nvs_flash.h&quot;</code><br />
<code>#include &quot;<a class="el" href="scientisst_8h_source.html">scientisst.h</a>&quot;</code><br />
<code>#include &quot;sys/time.h&quot;</code><br />
<code>#include &quot;time.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bt.c:</div>
<div class="dyncontent">
<div class="center"><img src="bt_8c__incl.png" border="0" usemap="#abt_8c" alt=""/></div>
<map name="abt_8c" id="abt_8c">
<area shape="rect" title="BT communication file with some general functions also." alt="" coords="1527,5,1574,32"/>
<area shape="rect" href="bt_8h.html" title="Bluetooth header file." alt="" coords="2994,80,3040,107"/>
<area shape="rect" title=" " alt="" coords="3064,80,3135,107"/>
<area shape="rect" title=" " alt="" coords="320,155,402,181"/>
<area shape="rect" title=" " alt="" coords="2314,229,2384,256"/>
<area shape="rect" title=" " alt="" coords="427,155,498,181"/>
<area shape="rect" href="com_8h.html" title="This file contains the definitions of the functions used to process the received data." alt="" coords="232,155,295,181"/>
<area shape="rect" title=" " alt="" coords="3160,80,3237,107"/>
<area shape="rect" title=" " alt="" coords="522,155,648,181"/>
<area shape="rect" title=" " alt="" coords="673,155,790,181"/>
<area shape="rect" title=" " alt="" coords="815,155,950,181"/>
<area shape="rect" title=" " alt="" coords="124,155,208,181"/>
<area shape="rect" title=" " alt="" coords="974,155,1089,181"/>
<area shape="rect" title=" " alt="" coords="3261,80,3373,107"/>
<area shape="rect" title=" " alt="" coords="1114,155,1264,181"/>
<area shape="rect" title=" " alt="" coords="2402,155,2520,181"/>
<area shape="rect" href="macros_8h.html" title="This file contains the definitions of the macros used in the project." alt="" coords="73,80,156,107"/>
<area shape="rect" title=" " alt="" coords="2544,155,2602,181"/>
<area shape="rect" title=" " alt="" coords="2626,155,2720,181"/>
<area shape="rect" href="scientisst_8h.html" title="Main header file for the Scientisst firmware." alt="" coords="1502,80,1598,107"/>
<area shape="rect" title=" " alt="" coords="2745,155,2836,181"/>
<area shape="rect" title=" " alt="" coords="2860,155,2924,181"/>
<area shape="rect" title=" " alt="" coords="802,229,869,256"/>
<area shape="rect" title=" " alt="" coords="3050,155,3131,181"/>
<area shape="rect" title=" " alt="" coords="3155,155,3242,181"/>
<area shape="rect" title=" " alt="" coords="216,229,312,256"/>
<area shape="rect" title=" " alt="" coords="25,155,100,181"/>
<area shape="rect" title=" " alt="" coords="1447,155,1520,181"/>
<area shape="rect" title=" " alt="" coords="1545,155,1692,181"/>
<area shape="rect" title=" " alt="" coords="1716,155,1827,181"/>
<area shape="rect" title=" " alt="" coords="1851,155,1964,181"/>
<area shape="rect" title=" " alt="" coords="1989,155,2082,181"/>
<area shape="rect" title=" " alt="" coords="2107,155,2244,181"/>
<area shape="rect" href="version_8h.html" title="Auto&#45;generated file containing the firmware version number." alt="" coords="1340,155,1422,181"/>
<area shape="rect" href="wifi_8h.html" title="Wifi functions definitions and relevant defines." alt="" coords="2320,155,2378,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a09adbbe03bca19d08be8cc4f256e7cc9"><td class="memItemLeft" align="right" valign="top">void IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bt_8c.html#a09adbbe03bca19d08be8cc4f256e7cc9">sendData</a> (void)</td></tr>
<tr class="memdesc:a09adbbe03bca19d08be8cc4f256e7cc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to send data using the appropriate send function.  <a href="bt_8c.html#a09adbbe03bca19d08be8cc4f256e7cc9">More...</a><br /></td></tr>
<tr class="separator:a09adbbe03bca19d08be8cc4f256e7cc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a970bbfe7779123f1f8ec27fb3a615c55"><td class="memItemLeft" align="right" valign="top">void IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bt_8c.html#a970bbfe7779123f1f8ec27fb3a615c55">finalizeSend</a> (void)</td></tr>
<tr class="memdesc:a970bbfe7779123f1f8ec27fb3a615c55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to finalize the send process.  <a href="bt_8c.html#a970bbfe7779123f1f8ec27fb3a615c55">More...</a><br /></td></tr>
<tr class="separator:a970bbfe7779123f1f8ec27fb3a615c55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d589ae3a900fe0bf71eddee1dd0cfaf"><td class="memItemLeft" align="right" valign="top"><a id="a1d589ae3a900fe0bf71eddee1dd0cfaf" name="a1d589ae3a900fe0bf71eddee1dd0cfaf"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>initBt</b> (void)</td></tr>
<tr class="memdesc:a1d589ae3a900fe0bf71eddee1dd0cfaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the bluetooth communication. <br /></td></tr>
<tr class="separator:a1d589ae3a900fe0bf71eddee1dd0cfaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a986d19de50327259af91066c4e1152d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="bt_8c.html#a986d19de50327259af91066c4e1152d0">getDeviceName</a> (void)</td></tr>
<tr class="memdesc:a986d19de50327259af91066c4e1152d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the device name.  <a href="bt_8c.html#a986d19de50327259af91066c4e1152d0">More...</a><br /></td></tr>
<tr class="separator:a986d19de50327259af91066c4e1152d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >BT communication file with some general functions also. </p>
<p >This file contains the functions used for the BT communication. It also contains some general functions used in the firmware. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a970bbfe7779123f1f8ec27fb3a615c55" name="a970bbfe7779123f1f8ec27fb3a615c55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a970bbfe7779123f1f8ec27fb3a615c55">&#9670;&nbsp;</a></span>finalizeSend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IRAM_ATTR finalizeSend </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to finalize the send process. </p>
<p >This function clears the sent buffer and changes the current buffer to send. </p>

</div>
</div>
<a id="a986d19de50327259af91066c4e1152d0" name="a986d19de50327259af91066c4e1152d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a986d19de50327259af91066c4e1152d0">&#9670;&nbsp;</a></span>getDeviceName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getDeviceName </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the device name. </p>
<p >Use the last 2 bytes of MAC-ADDRESS found on EFUSE to make the device name </p>

</div>
</div>
<a id="a09adbbe03bca19d08be8cc4f256e7cc9" name="a09adbbe03bca19d08be8cc4f256e7cc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09adbbe03bca19d08be8cc4f256e7cc9">&#9670;&nbsp;</a></span>sendData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IRAM_ATTR sendData </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to send data using the appropriate send function. </p>
<p >This function is called by the send task and sends the data using the appropriate send function. It first checks if there's anything to send. The buffer changing and clearing tasks are done after in <a class="el" href="bt_8c.html#a970bbfe7779123f1f8ec27fb3a615c55" title="Function to finalize the send process.">finalizeSend()</a> the ESP_SPP_WRITE_EVT event ocurred with writing completed successfully in esp_spp_cb(). </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
