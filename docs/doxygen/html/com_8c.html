<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Scientisst: com.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Scientisst
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">com.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file contains the functions that handle the communication with the client.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="com_8h_source.html">com.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="adc_8h_source.html">adc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="bt_8h_source.html">bt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="config_8h_source.html">config.h</a>&quot;</code><br />
<code>#include &quot;driver/timer.h&quot;</code><br />
<code>#include &quot;freertos/FreeRTOS.h&quot;</code><br />
<code>#include &quot;freertos/task.h&quot;</code><br />
<code>#include &quot;<a class="el" href="gpio_8h_source.html">gpio.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="macros_8h_source.html">macros.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="macros__conf_8h_source.html">macros_conf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="scientisst_8h_source.html">scientisst.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sd__card_8h_source.html">sd_card.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="spi_8h_source.html">spi.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timer_8h_source.html">timer.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for com.c:</div>
<div class="dyncontent">
<div class="center"><img src="com_8c__incl.png" border="0" usemap="#acom_8c" alt=""/></div>
<map name="acom_8c" id="acom_8c">
<area shape="rect" title="This file contains the functions that handle the communication with the client." alt="" coords="1304,5,1365,32"/>
<area shape="rect" href="com_8h.html" title="This file contains the definitions of the functions used to process the received data." alt="" coords="3502,155,3565,181"/>
<area shape="rect" href="adc_8h.html" title="ADC interactions header file." alt="" coords="710,80,767,107"/>
<area shape="rect" href="spi_8h.html" title="This file contains the definitions of the functions used to communicate with the external ADCs." alt="" coords="439,155,492,181"/>
<area shape="rect" href="config_8h.html" title="Configuration file." alt="" coords="418,229,491,256"/>
<area shape="rect" href="macros__conf_8h.html" title="Hidden macros for configuration file." alt="" coords="170,304,286,331"/>
<area shape="rect" href="bt_8h.html" title="Bluetooth header file." alt="" coords="3579,80,3626,107"/>
<area shape="rect" title=" " alt="" coords="1183,155,1294,181"/>
<area shape="rect" title=" " alt="" coords="1318,155,1469,181"/>
<area shape="rect" title=" " alt="" coords="1493,155,1611,181"/>
<area shape="rect" href="gpio_8h.html" title="GPIO interactions." alt="" coords="301,155,363,181"/>
<area shape="rect" href="macros_8h.html" title="This file contains the definitions of the macros used in the project." alt="" coords="1036,80,1119,107"/>
<area shape="rect" href="scientisst_8h.html" title="Main header file for the Scientisst firmware." alt="" coords="2144,80,2240,107"/>
<area shape="rect" href="sd__card_8h.html" title="SD card driver. This file implements the SD card driver." alt="" coords="3650,80,3734,107"/>
<area shape="rect" href="timer_8h.html" title="Timer functions for the Scientisst firmware." alt="" coords="2807,80,2875,107"/>
<area shape="rect" title=" " alt="" coords="1335,229,1401,256"/>
<area shape="rect" title=" " alt="" coords="3485,229,3581,256"/>
<area shape="rect" title=" " alt="" coords="789,155,862,181"/>
<area shape="rect" title=" " alt="" coords="516,155,615,181"/>
<area shape="rect" title=" " alt="" coords="886,155,999,181"/>
<area shape="rect" title=" " alt="" coords="952,229,1099,256"/>
<area shape="rect" title=" " alt="" coords="567,229,705,256"/>
<area shape="rect" title=" " alt="" coords="3751,155,3833,181"/>
<area shape="rect" title=" " alt="" coords="3641,155,3727,181"/>
<area shape="rect" title=" " alt="" coords="40,229,139,256"/>
<area shape="rect" title=" " alt="" coords="163,229,267,256"/>
<area shape="rect" title=" " alt="" coords="291,229,394,256"/>
<area shape="rect" title=" " alt="" coords="689,155,764,181"/>
<area shape="rect" title=" " alt="" coords="1075,155,1159,181"/>
<area shape="rect" title=" " alt="" coords="3212,155,3295,181"/>
<area shape="rect" title=" " alt="" coords="3343,229,3414,256"/>
<area shape="rect" title=" " alt="" coords="1737,155,1807,181"/>
<area shape="rect" title=" " alt="" coords="1831,155,1958,181"/>
<area shape="rect" title=" " alt="" coords="1983,155,2100,181"/>
<area shape="rect" title=" " alt="" coords="2125,155,2259,181"/>
<area shape="rect" title=" " alt="" coords="2284,155,2377,181"/>
<area shape="rect" title=" " alt="" coords="2401,155,2516,181"/>
<area shape="rect" title=" " alt="" coords="2541,155,2678,181"/>
<area shape="rect" title=" " alt="" coords="2702,155,2759,181"/>
<area shape="rect" title=" " alt="" coords="2783,155,2878,181"/>
<area shape="rect" title=" " alt="" coords="2903,155,2993,181"/>
<area shape="rect" title=" " alt="" coords="3017,155,3081,181"/>
<area shape="rect" href="version_8h.html" title="Auto&#45;generated file containing the firmware version number." alt="" coords="3105,155,3188,181"/>
<area shape="rect" href="wifi_8h.html" title="Wifi functions definitions and relevant defines." alt="" coords="3421,155,3478,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af76591bc60b3471c3965c45abb2054a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8c.html#af76591bc60b3471c3965c45abb2054a9">processRcv</a> (uint8_t *buff, int len)</td></tr>
<tr class="memdesc:af76591bc60b3471c3965c45abb2054a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes the command received from the client.  <a href="com_8c.html#af76591bc60b3471c3965c45abb2054a9">More...</a><br /></td></tr>
<tr class="separator:af76591bc60b3471c3965c45abb2054a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a911de171ac9bb21aa35c3c35f21eeb52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8c.html#a911de171ac9bb21aa35c3c35f21eeb52">triggerGpio</a> (uint8_t *buff)</td></tr>
<tr class="memdesc:a911de171ac9bb21aa35c3c35f21eeb52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set output GPIO levels.  <a href="com_8c.html#a911de171ac9bb21aa35c3c35f21eeb52">More...</a><br /></td></tr>
<tr class="separator:a911de171ac9bb21aa35c3c35f21eeb52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768fa7b96f28d9b1bd5175d701bab3cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8c.html#a768fa7b96f28d9b1bd5175d701bab3cf">triggerDAC</a> (uint8_t *buff)</td></tr>
<tr class="memdesc:a768fa7b96f28d9b1bd5175d701bab3cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set output DAC level.  <a href="com_8c.html#a768fa7b96f28d9b1bd5175d701bab3cf">More...</a><br /></td></tr>
<tr class="separator:a768fa7b96f28d9b1bd5175d701bab3cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a764d78a8e7be94dbac7960944d177cd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8c.html#a764d78a8e7be94dbac7960944d177cd5">changeAPI</a> (uint8_t mode)</td></tr>
<tr class="memdesc:a764d78a8e7be94dbac7960944d177cd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the API mode.  <a href="com_8c.html#a764d78a8e7be94dbac7960944d177cd5">More...</a><br /></td></tr>
<tr class="separator:a764d78a8e7be94dbac7960944d177cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa72b55e12d976d144b6351c83d4a463"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8c.html#afa72b55e12d976d144b6351c83d4a463">getPacketSize</a> (void)</td></tr>
<tr class="memdesc:afa72b55e12d976d144b6351c83d4a463"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the packet size.  <a href="com_8c.html#afa72b55e12d976d144b6351c83d4a463">More...</a><br /></td></tr>
<tr class="separator:afa72b55e12d976d144b6351c83d4a463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a7d9887d866419d989f52e64fc39443"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8c.html#a0a7d9887d866419d989f52e64fc39443">selectChsFromMaskScientisstJson</a> (uint8_t *buff)</td></tr>
<tr class="memdesc:a0a7d9887d866419d989f52e64fc39443"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects the active channels.  <a href="com_8c.html#a0a7d9887d866419d989f52e64fc39443">More...</a><br /></td></tr>
<tr class="separator:a0a7d9887d866419d989f52e64fc39443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcfa347fce6d5b2c4235aca5aae2bb42"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8c.html#adcfa347fce6d5b2c4235aca5aae2bb42">setSampleRate</a> (uint8_t *buff)</td></tr>
<tr class="memdesc:adcfa347fce6d5b2c4235aca5aae2bb42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the sample rate.  <a href="com_8c.html#adcfa347fce6d5b2c4235aca5aae2bb42">More...</a><br /></td></tr>
<tr class="separator:adcfa347fce6d5b2c4235aca5aae2bb42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac2378909bc99c264f31dc8db49d6e0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8c.html#aac2378909bc99c264f31dc8db49d6e0d">selectChsFromMask</a> (uint8_t *buff)</td></tr>
<tr class="memdesc:aac2378909bc99c264f31dc8db49d6e0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects the active channels.  <a href="com_8c.html#aac2378909bc99c264f31dc8db49d6e0d">More...</a><br /></td></tr>
<tr class="separator:aac2378909bc99c264f31dc8db49d6e0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f1baabc30148b69a50e3e4e08270a75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8c.html#a4f1baabc30148b69a50e3e4e08270a75">startAcquisition</a> (uint8_t *buff, uint8_t cmd)</td></tr>
<tr class="memdesc:a4f1baabc30148b69a50e3e4e08270a75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the acquisition.  <a href="com_8c.html#a4f1baabc30148b69a50e3e4e08270a75">More...</a><br /></td></tr>
<tr class="separator:a4f1baabc30148b69a50e3e4e08270a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae888ca03d182fe258b3e3f0f528fdb24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8c.html#ae888ca03d182fe258b3e3f0f528fdb24">stopAcquisition</a> (void)</td></tr>
<tr class="memdesc:ae888ca03d182fe258b3e3f0f528fdb24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the acquisition.  <a href="com_8c.html#ae888ca03d182fe258b3e3f0f528fdb24">More...</a><br /></td></tr>
<tr class="separator:ae888ca03d182fe258b3e3f0f528fdb24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaad57103676720c12c3e1427a0a08f0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8c.html#aaad57103676720c12c3e1427a0a08f0f">sendStatusPacket</a> (void)</td></tr>
<tr class="memdesc:aaad57103676720c12c3e1427a0a08f0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the status packet.  <a href="com_8c.html#aaad57103676720c12c3e1427a0a08f0f">More...</a><br /></td></tr>
<tr class="separator:aaad57103676720c12c3e1427a0a08f0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38a9b2d694ad241a1f984a93f646559b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8c.html#a38a9b2d694ad241a1f984a93f646559b">sendFirmwareVersionPacket</a> (void)</td></tr>
<tr class="memdesc:a38a9b2d694ad241a1f984a93f646559b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the firmware version packet.  <a href="com_8c.html#a38a9b2d694ad241a1f984a93f646559b">More...</a><br /></td></tr>
<tr class="separator:a38a9b2d694ad241a1f984a93f646559b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This file contains the functions that handle the communication with the client. </p>
<p >This file provides the functions that handle the communication with the client. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a764d78a8e7be94dbac7960944d177cd5" name="a764d78a8e7be94dbac7960944d177cd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a764d78a8e7be94dbac7960944d177cd5">&#9670;&nbsp;</a></span>changeAPI()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void changeAPI </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes the API mode. </p>
<p >This function changes the API mode and updates the functions that are used to acquire data and select channels. Currently, the API modes are: Bitalino (Legacy), Scientisst and JSON. </p>

</div>
</div>
<a id="afa72b55e12d976d144b6351c83d4a463" name="afa72b55e12d976d144b6351c83d4a463"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa72b55e12d976d144b6351c83d4a463">&#9670;&nbsp;</a></span>getPacketSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t getPacketSize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the packet size. </p>
<p >This function returns the packet size in function of the current API mode and the number of active channels.</p>
<dl class="section return"><dt>Returns</dt><dd>The packet size </dd></dl>

</div>
</div>
<a id="af76591bc60b3471c3965c45abb2054a9" name="af76591bc60b3471c3965c45abb2054a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af76591bc60b3471c3965c45abb2054a9">&#9670;&nbsp;</a></span>processRcv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void processRcv </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes the command received from the client. </p>
<p >This function processes the command received from the client. It works in any mode and with all API's.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buff</td><td>The buffer received </td></tr>
    <tr><td class="paramname">len</td><td>The length of the buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aac2378909bc99c264f31dc8db49d6e0d" name="aac2378909bc99c264f31dc8db49d6e0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac2378909bc99c264f31dc8db49d6e0d">&#9670;&nbsp;</a></span>selectChsFromMask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void selectChsFromMask </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects the active channels. </p>
<p >This function selects the active channels according to the received command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buff</td><td>The received command </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0a7d9887d866419d989f52e64fc39443" name="a0a7d9887d866419d989f52e64fc39443"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a7d9887d866419d989f52e64fc39443">&#9670;&nbsp;</a></span>selectChsFromMaskScientisstJson()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void selectChsFromMaskScientisstJson </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects the active channels. </p>
<p >This function selects the active channels according to the received command for the ScientISST and JSON API modes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buff</td><td>The received command </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a38a9b2d694ad241a1f984a93f646559b" name="a38a9b2d694ad241a1f984a93f646559b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38a9b2d694ad241a1f984a93f646559b">&#9670;&nbsp;</a></span>sendFirmwareVersionPacket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendFirmwareVersionPacket </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the firmware version packet. </p>
<p >This function sends the firmware version packet. It is called when the client requests the firmware version packet. It fills one position of the send buffer with the information and marks it as ready to be sent. It also changes the lowers the send threshold to 0, so that the data is sent as soon as possible and then restores the send threshold to its previous value. </p>

</div>
</div>
<a id="aaad57103676720c12c3e1427a0a08f0f" name="aaad57103676720c12c3e1427a0a08f0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaad57103676720c12c3e1427a0a08f0f">&#9670;&nbsp;</a></span>sendStatusPacket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendStatusPacket </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the status packet. </p>
<p >This function sends the status packet. It is called when the client requests the status packet. </p>
<p >(uint16_t*)(snd_buff[bt_curr_buff]) = i2c_sensor_values.oxygen; (uint16_t*)(snd_buff[bt_curr_buff]+2) = i2c_sensor_values.heart_rate; (uint16_t*)(snd_buff[bt_curr_buff]+4) = (uint16_t)i2c_sensor_values.confidence; (uint16_t*)(snd_buff[bt_curr_buff]+6) = (uint16_t)i2c_sensor_values.status; (uint16_t*)(snd_buff[bt_curr_buff]+8) = i2c_sensor_values.temp_obj_int; (uint16_t*)(snd_buff[bt_curr_buff]+10) = i2c_sensor_values.temp_amb_int;</p>

</div>
</div>
<a id="adcfa347fce6d5b2c4235aca5aae2bb42" name="adcfa347fce6d5b2c4235aca5aae2bb42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcfa347fce6d5b2c4235aca5aae2bb42">&#9670;&nbsp;</a></span>setSampleRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setSampleRate </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the sample rate. </p>
<p >This function sets the sample rate according to the received command. </p>

</div>
</div>
<a id="a4f1baabc30148b69a50e3e4e08270a75" name="a4f1baabc30148b69a50e3e4e08270a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f1baabc30148b69a50e3e4e08270a75">&#9670;&nbsp;</a></span>startAcquisition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void startAcquisition </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the acquisition. </p>
<p >This function starts the acquisition according to the received command. It starts the ADC and the timer. It also sets the acquisition mode (live or simulated). It also changes the LED state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buff</td><td>The received command </td></tr>
    <tr><td class="paramname">cmd</td><td>The command (identifies if it is a live or a simulated acquisition) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>If changed, change same code in API (warning on identified on code) </dd></dl>

</div>
</div>
<a id="ae888ca03d182fe258b3e3f0f528fdb24" name="ae888ca03d182fe258b3e3f0f528fdb24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae888ca03d182fe258b3e3f0f528fdb24">&#9670;&nbsp;</a></span>stopAcquisition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stopAcquisition </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the acquisition. </p>
<p >This function stops the acquisition. It stops the ADC and the timer. It also changes the LED state. It cleans all buffers and active channels. </p>

</div>
</div>
<a id="a768fa7b96f28d9b1bd5175d701bab3cf" name="a768fa7b96f28d9b1bd5175d701bab3cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a768fa7b96f28d9b1bd5175d701bab3cf">&#9670;&nbsp;</a></span>triggerDAC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void triggerDAC </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set output DAC level. </p>
<p >This function sets the output DAC level according to the received command. //TODO: Confirm this </p>

</div>
</div>
<a id="a911de171ac9bb21aa35c3c35f21eeb52" name="a911de171ac9bb21aa35c3c35f21eeb52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a911de171ac9bb21aa35c3c35f21eeb52">&#9670;&nbsp;</a></span>triggerGpio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void triggerGpio </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set output GPIO levels. </p>
<p >This function sets the output GPIO levels according to the received command. //TODO: Confirm this </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
