<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Scientisst: timer.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Scientisst
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">timer.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Timer functions for the Scientisst firmware.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;driver/timer.h&quot;</code><br />
<code>#include &quot;driver/periph_ctrl.h&quot;</code><br />
<code>#include &quot;esp_types.h&quot;</code><br />
<code>#include &quot;freertos/FreeRTOS.h&quot;</code><br />
<code>#include &quot;freertos/queue.h&quot;</code><br />
<code>#include &quot;freertos/task.h&quot;</code><br />
<code>#include &quot;<a class="el" href="gpio_8h_source.html">gpio.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="macros_8h_source.html">macros.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="macros__conf_8h_source.html">macros_conf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="scientisst_8h_source.html">scientisst.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timer_8h_source.html">timer.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for timer.c:</div>
<div class="dyncontent">
<div class="center"><img src="timer_8c__incl.png" border="0" usemap="#atimer_8c" alt=""/></div>
<map name="atimer_8c" id="atimer_8c">
<area shape="rect" title="Timer functions for the Scientisst firmware." alt="" coords="1090,5,1157,32"/>
<area shape="rect" title=" " alt="" coords="913,155,1024,181"/>
<area shape="rect" title=" " alt="" coords="2249,80,2395,107"/>
<area shape="rect" title=" " alt="" coords="2419,80,2519,107"/>
<area shape="rect" title=" " alt="" coords="1048,155,1199,181"/>
<area shape="rect" title=" " alt="" coords="2543,80,2672,107"/>
<area shape="rect" title=" " alt="" coords="1223,155,1341,181"/>
<area shape="rect" href="gpio_8h.html" title="GPIO interactions." alt="" coords="244,80,307,107"/>
<area shape="rect" href="macros__conf_8h.html" title="Hidden macros for configuration file." alt="" coords="5,229,121,256"/>
<area shape="rect" href="macros_8h.html" title="This file contains the definitions of the macros used in the project." alt="" coords="703,80,786,107"/>
<area shape="rect" href="scientisst_8h.html" title="Main header file for the Scientisst firmware." alt="" coords="2129,80,2225,107"/>
<area shape="rect" href="timer_8h.html" title="Timer functions for the Scientisst firmware." alt="" coords="863,80,931,107"/>
<area shape="rect" title=" " alt="" coords="734,229,801,256"/>
<area shape="rect" href="config_8h.html" title="Configuration file." alt="" coords="27,155,100,181"/>
<area shape="rect" title=" " alt="" coords="226,155,325,181"/>
<area shape="rect" title=" " alt="" coords="349,155,453,181"/>
<area shape="rect" title=" " alt="" coords="477,155,580,181"/>
<area shape="rect" title=" " alt="" coords="655,155,730,181"/>
<area shape="rect" title=" " alt="" coords="805,155,889,181"/>
<area shape="rect" title=" " alt="" coords="3022,155,3105,181"/>
<area shape="rect" title=" " alt="" coords="3140,229,3211,256"/>
<area shape="rect" title=" " alt="" coords="3261,155,3332,181"/>
<area shape="rect" title=" " alt="" coords="3356,155,3429,181"/>
<area shape="rect" href="com_8h.html" title="This file contains the definitions of the functions used to process the received data." alt="" coords="2935,155,2997,181"/>
<area shape="rect" title=" " alt="" coords="3454,155,3601,181"/>
<area shape="rect" title=" " alt="" coords="1365,155,1479,181"/>
<area shape="rect" title=" " alt="" coords="1503,155,1629,181"/>
<area shape="rect" title=" " alt="" coords="1654,155,1771,181"/>
<area shape="rect" title=" " alt="" coords="1796,155,1931,181"/>
<area shape="rect" title=" " alt="" coords="1955,155,2049,181"/>
<area shape="rect" title=" " alt="" coords="2073,155,2187,181"/>
<area shape="rect" title=" " alt="" coords="2263,155,2400,181"/>
<area shape="rect" title=" " alt="" coords="2424,155,2481,181"/>
<area shape="rect" title=" " alt="" coords="2505,155,2600,181"/>
<area shape="rect" title=" " alt="" coords="2625,155,2715,181"/>
<area shape="rect" title=" " alt="" coords="2739,155,2803,181"/>
<area shape="rect" href="version_8h.html" title="Auto&#45;generated file containing the firmware version number." alt="" coords="2827,155,2910,181"/>
<area shape="rect" href="wifi_8h.html" title="Wifi functions definitions and relevant defines." alt="" coords="3180,155,3237,181"/>
<area shape="rect" title=" " alt="" coords="2918,229,3014,256"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8c7ade759bcbdb5f322c75e037a35372"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8c.html#a8c7ade759bcbdb5f322c75e037a35372">timerGrpInit</a> (int timer_group, int timer_idx, bool(*timer_isr)())</td></tr>
<tr class="memdesc:a8c7ade759bcbdb5f322c75e037a35372"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize selected timer of the specified timer group.  <a href="timer_8c.html#a8c7ade759bcbdb5f322c75e037a35372">More...</a><br /></td></tr>
<tr class="separator:a8c7ade759bcbdb5f322c75e037a35372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1bc234de7f0a67812f660fa2afae676"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8c.html#ae1bc234de7f0a67812f660fa2afae676">timerStart</a> (int timer_group, int timer_idx, uint32_t frequency)</td></tr>
<tr class="memdesc:ae1bc234de7f0a67812f660fa2afae676"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts selected timer of the specified timer group.  <a href="timer_8c.html#ae1bc234de7f0a67812f660fa2afae676">More...</a><br /></td></tr>
<tr class="separator:ae1bc234de7f0a67812f660fa2afae676"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa24482081052ef3405105945940652fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8c.html#aa24482081052ef3405105945940652fb">timerPause</a> (int timer_group, int timer_idx)</td></tr>
<tr class="memdesc:aa24482081052ef3405105945940652fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops selected timer of the specified timer group.  <a href="timer_8c.html#aa24482081052ef3405105945940652fb">More...</a><br /></td></tr>
<tr class="separator:aa24482081052ef3405105945940652fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a221852e951d7b9a5bd5d92daee708b75"><td class="memItemLeft" align="right" valign="top"><a id="a221852e951d7b9a5bd5d92daee708b75" name="a221852e951d7b9a5bd5d92daee708b75"></a>
bool IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><b>timerGrp0Isr</b> (void)</td></tr>
<tr class="separator:a221852e951d7b9a5bd5d92daee708b75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78ef14ddd3eb571d09ffc50f30e1a841"><td class="memItemLeft" align="right" valign="top"><a id="a78ef14ddd3eb571d09ffc50f30e1a841" name="a78ef14ddd3eb571d09ffc50f30e1a841"></a>
bool IRAM_ATTR&#160;</td><td class="memItemRight" valign="bottom"><b>timerGrp1Isr</b> (void)</td></tr>
<tr class="separator:a78ef14ddd3eb571d09ffc50f30e1a841"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f2a8567a429b77ce674c72b73d12582"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8c.html#a1f2a8567a429b77ce674c72b73d12582">esp_task_wdt_isr_user_handler</a> (void)</td></tr>
<tr class="memdesc:a1f2a8567a429b77ce674c72b73d12582"><td class="mdescLeft">&#160;</td><td class="mdescRight">ISR handler for the Task Watchdog Timer.  <a href="timer_8c.html#a1f2a8567a429b77ce674c72b73d12582">More...</a><br /></td></tr>
<tr class="separator:a1f2a8567a429b77ce674c72b73d12582"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Timer functions for the Scientisst firmware. </p>
<p >This file contains the functions for the timer used in the Scientisst firmware. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1f2a8567a429b77ce674c72b73d12582" name="a1f2a8567a429b77ce674c72b73d12582"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f2a8567a429b77ce674c72b73d12582">&#9670;&nbsp;</a></span>esp_task_wdt_isr_user_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void esp_task_wdt_isr_user_handler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ISR handler for the Task Watchdog Timer. </p>
<p >This function is called when the Task Watchdog Timer (TWDT) triggers. If bluetooth throughput is too high, either acquring task (CPU1) or sending task (CP0) may starve other tasks of CPU. Hence, sampling rate or number of channels need to be decreased. When that starvation happens, the Task Watchdog Timer (TWDT) will trigger and this handler will be called and livemode will be stop on its own. The ESP32 will then restart. </p>

</div>
</div>
<a id="a8c7ade759bcbdb5f322c75e037a35372" name="a8c7ade759bcbdb5f322c75e037a35372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c7ade759bcbdb5f322c75e037a35372">&#9670;&nbsp;</a></span>timerGrpInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timerGrpInit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timer_group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timer_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool(*)()&#160;</td>
          <td class="paramname"><em>timer_isr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize selected timer of the specified timer group. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timer_group</td><td>The timer group to be initialized </td></tr>
    <tr><td class="paramname">timer_idx</td><td>The timer number to initialize </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa24482081052ef3405105945940652fb" name="aa24482081052ef3405105945940652fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa24482081052ef3405105945940652fb">&#9670;&nbsp;</a></span>timerPause()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timerPause </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timer_group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timer_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops selected timer of the specified timer group. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timer_group</td><td>The timer group of the timer to be stopped </td></tr>
    <tr><td class="paramname">timer_idx</td><td>The timer number to stop </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae1bc234de7f0a67812f660fa2afae676" name="ae1bc234de7f0a67812f660fa2afae676"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1bc234de7f0a67812f660fa2afae676">&#9670;&nbsp;</a></span>timerStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timerStart </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timer_group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timer_idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>frequency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts selected timer of the specified timer group. </p>
<p >Starts &lt;timer_idx&gt; from &lt;timer_group&gt; and the alarm has an frequency of &lt;frequency&gt; Hz</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timer_group</td><td>The timer group of the timer to be started </td></tr>
    <tr><td class="paramname">timer_idx</td><td>The timer number to start </td></tr>
    <tr><td class="paramname">frequency</td><td>The frequency of the alarm </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
