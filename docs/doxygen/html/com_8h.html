<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Scientisst: com.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Scientisst
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">com.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file contains the definitions of the functions used to process the received data.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;sdkconfig.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for com.h:</div>
<div class="dyncontent">
<div class="center"><img src="com_8h__incl.png" border="0" usemap="#acom_8h" alt=""/></div>
<map name="acom_8h" id="acom_8h">
<area shape="rect" title="This file contains the definitions of the functions used to process the received data." alt="" coords="59,5,122,32"/>
<area shape="rect" title=" " alt="" coords="5,80,72,107"/>
<area shape="rect" title=" " alt="" coords="96,80,192,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="com_8h__dep__incl.png" border="0" usemap="#acom_8hdep" alt=""/></div>
<map name="acom_8hdep" id="acom_8hdep">
<area shape="rect" title="This file contains the definitions of the functions used to process the received data." alt="" coords="337,5,399,32"/>
<area shape="rect" href="adc_8c.html" title="ADC interactions functions file." alt="" coords="5,155,61,181"/>
<area shape="rect" href="ble_8c.html" title="Bluetooth Low Energy (BLE) mode functions." alt="" coords="85,155,139,181"/>
<area shape="rect" href="bt_8c.html" title="BT communication file with some general functions also." alt="" coords="163,155,210,181"/>
<area shape="rect" href="com_8c.html" title="This file contains the functions that handle the communication with the client." alt="" coords="235,155,296,181"/>
<area shape="rect" href="scientisst_8c.html" title="Main file for the Scientisst firmware." alt="" coords="321,155,415,181"/>
<area shape="rect" href="scientisst_8h.html" title="Main header file for the Scientisst firmware." alt="" coords="617,80,713,107"/>
<area shape="rect" href="sd__card_8c.html" title="SD card driver. This file implements the SD card driver." alt="" coords="440,155,523,181"/>
<area shape="rect" href="spi_8c.html" title="This file contains the definitions of the functions used to communicate with the external ADCs." alt="" coords="1295,155,1347,181"/>
<area shape="rect" href="ws_8c.html" title="Websocket server." alt="" coords="1372,155,1423,181"/>
<area shape="rect" href="gpio_8c.html" title="GPIO interactions." alt="" coords="547,155,608,181"/>
<area shape="rect" href="main_8c.html" title="Main file for the Scientisst project." alt="" coords="632,155,699,181"/>
<area shape="rect" href="tcp_8c.html" title="Header file for the TCP server and client functions." alt="" coords="723,155,776,181"/>
<area shape="rect" href="timer_8c.html" title="Timer functions for the Scientisst firmware." alt="" coords="800,155,867,181"/>
<area shape="rect" href="uart_8c.html" title="UART functions." alt="" coords="891,155,949,181"/>
<area shape="rect" href="udp_8c.html" title="Contains functions to send data over UDP." alt="" coords="974,155,1031,181"/>
<area shape="rect" href="wifi_8c.html" title="Wifi functions." alt="" coords="1056,155,1112,181"/>
<area shape="rect" href="wifi__rest__server_8c.html" title="This file contains the code for the RESTful API server." alt="" coords="1137,155,1271,181"/>
</map>
</div>
</div>
<p><a href="com_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structApi__Config.html">Api_Config</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1f7a8b393d5666dc98938dc78eaa605f"><td class="memItemLeft" align="right" valign="top"><a id="a1f7a8b393d5666dc98938dc78eaa605f" name="a1f7a8b393d5666dc98938dc78eaa605f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DEFAULT_ADC_CHANNELS</b>&#160;&#160;&#160;6</td></tr>
<tr class="separator:a1f7a8b393d5666dc98938dc78eaa605f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace928ea3d387e18e65d2ed3f21f32e62"><td class="memItemLeft" align="right" valign="top"><a id="ace928ea3d387e18e65d2ed3f21f32e62" name="ace928ea3d387e18e65d2ed3f21f32e62"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EXT_ADC_CHANNELS</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ace928ea3d387e18e65d2ed3f21f32e62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63dbe97403330f9a8c6237f0c94648c4"><td class="memItemLeft" align="right" valign="top"><a id="a63dbe97403330f9a8c6237f0c94648c4" name="a63dbe97403330f9a8c6237f0c94648c4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NUM_UNUSED_BITS_FOR_CH_MASK</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a63dbe97403330f9a8c6237f0c94648c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1465a090264f6ad8d2988869e2a1d0b4"><td class="memItemLeft" align="right" valign="top"><a id="a1465a090264f6ad8d2988869e2a1d0b4" name="a1465a090264f6ad8d2988869e2a1d0b4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>STATUS_PACKET_SIZE</b>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a1465a090264f6ad8d2988869e2a1d0b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48bb18b9c1200d588974fd3e17d042ce"><td class="memItemLeft" align="right" valign="top"><a id="a48bb18b9c1200d588974fd3e17d042ce" name="a48bb18b9c1200d588974fd3e17d042ce"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>API_MODE_BITALINO</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a48bb18b9c1200d588974fd3e17d042ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f5340c6cfe736952dd837d74178e01a"><td class="memItemLeft" align="right" valign="top"><a id="a3f5340c6cfe736952dd837d74178e01a" name="a3f5340c6cfe736952dd837d74178e01a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>API_MODE_SCIENTISST</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a3f5340c6cfe736952dd837d74178e01a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c06395a6cddd4b954f89ade667bc955"><td class="memItemLeft" align="right" valign="top"><a id="a7c06395a6cddd4b954f89ade667bc955" name="a7c06395a6cddd4b954f89ade667bc955"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>API_MODE_JSON</b>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a7c06395a6cddd4b954f89ade667bc955"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a049be03a6f9e86017d788d27e5162b08"><td class="memItemLeft" align="right" valign="top"><a id="a049be03a6f9e86017d788d27e5162b08" name="a049be03a6f9e86017d788d27e5162b08"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>OP_MODE_IDLE</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a049be03a6f9e86017d788d27e5162b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ff71f11e99f5aa1323dbde4821649a8"><td class="memItemLeft" align="right" valign="top"><a id="a9ff71f11e99f5aa1323dbde4821649a8" name="a9ff71f11e99f5aa1323dbde4821649a8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>OP_MODE_LIVE</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a9ff71f11e99f5aa1323dbde4821649a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0929f671f0383d4ac5d64e7f91a3b970"><td class="memItemLeft" align="right" valign="top"><a id="a0929f671f0383d4ac5d64e7f91a3b970" name="a0929f671f0383d4ac5d64e7f91a3b970"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>OP_MODE_CONFIG</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a0929f671f0383d4ac5d64e7f91a3b970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeee4cf3ad76ec038a5a52302b358b94"><td class="memItemLeft" align="right" valign="top"><a id="aeeee4cf3ad76ec038a5a52302b358b94" name="aeeee4cf3ad76ec038a5a52302b358b94"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CMD_MAX_BYTES</b>&#160;&#160;&#160;4</td></tr>
<tr class="separator:aeeee4cf3ad76ec038a5a52302b358b94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac028f4c15ac7f78a44be5db76cfbec7"><td class="memItemLeft" align="right" valign="top"><a id="aac028f4c15ac7f78a44be5db76cfbec7" name="aac028f4c15ac7f78a44be5db76cfbec7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NUM_BUFFERS</b>&#160;&#160;&#160;50</td></tr>
<tr class="separator:aac028f4c15ac7f78a44be5db76cfbec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d796b98c583d49e83adabd74a63bf6"><td class="memItemLeft" align="right" valign="top"><a id="ad4d796b98c583d49e83adabd74a63bf6" name="ad4d796b98c583d49e83adabd74a63bf6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_BUFFER_SIZE</b>&#160;&#160;&#160;(ESP_SPP_MAX_MTU)</td></tr>
<tr class="separator:ad4d796b98c583d49e83adabd74a63bf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac591c40754a327e42cf7ba92a1ad3a94"><td class="memItemLeft" align="right" valign="top"><a id="ac591c40754a327e42cf7ba92a1ad3a94" name="ac591c40754a327e42cf7ba92a1ad3a94"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ADC1_CFG_IDX</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ac591c40754a327e42cf7ba92a1ad3a94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ddc3594077babffef9bd9b0df7e8248"><td class="memItemLeft" align="right" valign="top"><a id="a5ddc3594077babffef9bd9b0df7e8248" name="a5ddc3594077babffef9bd9b0df7e8248"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ADC2_CFG_IDX</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a5ddc3594077babffef9bd9b0df7e8248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa676b48ec7e6ade38b8e52fda3220dbc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8h.html#aa676b48ec7e6ade38b8e52fda3220dbc">GET_NEXT_POS</a>(curr_pos,  dist)</td></tr>
<tr class="separator:aa676b48ec7e6ade38b8e52fda3220dbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a75d082b51bb8b243b32babf907d90cee"><td class="memItemLeft" align="right" valign="top"><a id="a75d082b51bb8b243b32babf907d90cee" name="a75d082b51bb8b243b32babf907d90cee"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>processRcv2</b> (uint8_t *buff, int buff_size)</td></tr>
<tr class="separator:a75d082b51bb8b243b32babf907d90cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a785ca18add149b21c236f76aae134268"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8h.html#a785ca18add149b21c236f76aae134268">processRcv</a> (uint8_t *buff, int buff_size)</td></tr>
<tr class="memdesc:a785ca18add149b21c236f76aae134268"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes the command received from the client.  <a href="com_8h.html#a785ca18add149b21c236f76aae134268">More...</a><br /></td></tr>
<tr class="separator:a785ca18add149b21c236f76aae134268"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac2378909bc99c264f31dc8db49d6e0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8h.html#aac2378909bc99c264f31dc8db49d6e0d">selectChsFromMask</a> (uint8_t *buff)</td></tr>
<tr class="memdesc:aac2378909bc99c264f31dc8db49d6e0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects the active channels.  <a href="com_8h.html#aac2378909bc99c264f31dc8db49d6e0d">More...</a><br /></td></tr>
<tr class="separator:aac2378909bc99c264f31dc8db49d6e0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae888ca03d182fe258b3e3f0f528fdb24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8h.html#ae888ca03d182fe258b3e3f0f528fdb24">stopAcquisition</a> (void)</td></tr>
<tr class="memdesc:ae888ca03d182fe258b3e3f0f528fdb24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the acquisition.  <a href="com_8h.html#ae888ca03d182fe258b3e3f0f528fdb24">More...</a><br /></td></tr>
<tr class="separator:ae888ca03d182fe258b3e3f0f528fdb24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5af5c77546cadc8c381dcea191a5a3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8h.html#ab5af5c77546cadc8c381dcea191a5a3a">sendStatusPacket</a> ()</td></tr>
<tr class="memdesc:ab5af5c77546cadc8c381dcea191a5a3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the status packet.  <a href="com_8h.html#ab5af5c77546cadc8c381dcea191a5a3a">More...</a><br /></td></tr>
<tr class="separator:ab5af5c77546cadc8c381dcea191a5a3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d4492b3724f0efdc58c689be11ed2ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8h.html#a2d4492b3724f0efdc58c689be11ed2ef">sendFirmwareVersionPacket</a> ()</td></tr>
<tr class="memdesc:a2d4492b3724f0efdc58c689be11ed2ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the firmware version packet.  <a href="com_8h.html#a2d4492b3724f0efdc58c689be11ed2ef">More...</a><br /></td></tr>
<tr class="separator:a2d4492b3724f0efdc58c689be11ed2ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a764d78a8e7be94dbac7960944d177cd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8h.html#a764d78a8e7be94dbac7960944d177cd5">changeAPI</a> (uint8_t mode)</td></tr>
<tr class="memdesc:a764d78a8e7be94dbac7960944d177cd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes the API mode.  <a href="com_8h.html#a764d78a8e7be94dbac7960944d177cd5">More...</a><br /></td></tr>
<tr class="separator:a764d78a8e7be94dbac7960944d177cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a7d9887d866419d989f52e64fc39443"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8h.html#a0a7d9887d866419d989f52e64fc39443">selectChsFromMaskScientisstJson</a> (uint8_t *buff)</td></tr>
<tr class="memdesc:a0a7d9887d866419d989f52e64fc39443"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects the active channels.  <a href="com_8h.html#a0a7d9887d866419d989f52e64fc39443">More...</a><br /></td></tr>
<tr class="separator:a0a7d9887d866419d989f52e64fc39443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcfa347fce6d5b2c4235aca5aae2bb42"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8h.html#adcfa347fce6d5b2c4235aca5aae2bb42">setSampleRate</a> (uint8_t *buff)</td></tr>
<tr class="memdesc:adcfa347fce6d5b2c4235aca5aae2bb42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the sample rate.  <a href="com_8h.html#adcfa347fce6d5b2c4235aca5aae2bb42">More...</a><br /></td></tr>
<tr class="separator:adcfa347fce6d5b2c4235aca5aae2bb42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a911de171ac9bb21aa35c3c35f21eeb52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8h.html#a911de171ac9bb21aa35c3c35f21eeb52">triggerGpio</a> (uint8_t *buff)</td></tr>
<tr class="memdesc:a911de171ac9bb21aa35c3c35f21eeb52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set output GPIO levels.  <a href="com_8h.html#a911de171ac9bb21aa35c3c35f21eeb52">More...</a><br /></td></tr>
<tr class="separator:a911de171ac9bb21aa35c3c35f21eeb52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768fa7b96f28d9b1bd5175d701bab3cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8h.html#a768fa7b96f28d9b1bd5175d701bab3cf">triggerDAC</a> (uint8_t *buff)</td></tr>
<tr class="memdesc:a768fa7b96f28d9b1bd5175d701bab3cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set output DAC level.  <a href="com_8h.html#a768fa7b96f28d9b1bd5175d701bab3cf">More...</a><br /></td></tr>
<tr class="separator:a768fa7b96f28d9b1bd5175d701bab3cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f1baabc30148b69a50e3e4e08270a75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8h.html#a4f1baabc30148b69a50e3e4e08270a75">startAcquisition</a> (uint8_t *buff, uint8_t cmd)</td></tr>
<tr class="memdesc:a4f1baabc30148b69a50e3e4e08270a75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the acquisition.  <a href="com_8h.html#a4f1baabc30148b69a50e3e4e08270a75">More...</a><br /></td></tr>
<tr class="separator:a4f1baabc30148b69a50e3e4e08270a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa72b55e12d976d144b6351c83d4a463"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="com_8h.html#afa72b55e12d976d144b6351c83d4a463">getPacketSize</a> (void)</td></tr>
<tr class="memdesc:afa72b55e12d976d144b6351c83d4a463"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the packet size.  <a href="com_8h.html#afa72b55e12d976d144b6351c83d4a463">More...</a><br /></td></tr>
<tr class="separator:afa72b55e12d976d144b6351c83d4a463"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This file contains the definitions of the functions used to process the received data. </p>
<p >TODO: Add more info </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa676b48ec7e6ade38b8e52fda3220dbc" name="aa676b48ec7e6ade38b8e52fda3220dbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa676b48ec7e6ade38b8e52fda3220dbc">&#9670;&nbsp;</a></span>GET_NEXT_POS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GET_NEXT_POS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">curr_pos, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dist&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    ({                                                          \</div>
<div class="line">        curr_pos.start_byte += (curr_pos.start_bit + dist) / 8; \</div>
<div class="line">        curr_pos.start_bit = (curr_pos.start_bit + dist) % 8;   \</div>
<div class="line">    })</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a764d78a8e7be94dbac7960944d177cd5" name="a764d78a8e7be94dbac7960944d177cd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a764d78a8e7be94dbac7960944d177cd5">&#9670;&nbsp;</a></span>changeAPI()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void changeAPI </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Changes the API mode. </p>
<p >This function changes the API mode and updates the functions that are used to acquire data and select channels. Currently, the API modes are: Bitalino (Legacy), Scientisst and JSON. </p>

</div>
</div>
<a id="afa72b55e12d976d144b6351c83d4a463" name="afa72b55e12d976d144b6351c83d4a463"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa72b55e12d976d144b6351c83d4a463">&#9670;&nbsp;</a></span>getPacketSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t getPacketSize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the packet size. </p>
<p >This function returns the packet size in function of the current API mode and the number of active channels.</p>
<dl class="section return"><dt>Returns</dt><dd>The packet size </dd></dl>

</div>
</div>
<a id="a785ca18add149b21c236f76aae134268" name="a785ca18add149b21c236f76aae134268"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a785ca18add149b21c236f76aae134268">&#9670;&nbsp;</a></span>processRcv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void processRcv </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes the command received from the client. </p>
<p >This function processes the command received from the client. It works in any mode and with all API's.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buff</td><td>The buffer received </td></tr>
    <tr><td class="paramname">len</td><td>The length of the buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aac2378909bc99c264f31dc8db49d6e0d" name="aac2378909bc99c264f31dc8db49d6e0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac2378909bc99c264f31dc8db49d6e0d">&#9670;&nbsp;</a></span>selectChsFromMask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void selectChsFromMask </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects the active channels. </p>
<p >This function selects the active channels according to the received command.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buff</td><td>The received command </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0a7d9887d866419d989f52e64fc39443" name="a0a7d9887d866419d989f52e64fc39443"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a7d9887d866419d989f52e64fc39443">&#9670;&nbsp;</a></span>selectChsFromMaskScientisstJson()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void selectChsFromMaskScientisstJson </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects the active channels. </p>
<p >This function selects the active channels according to the received command for the ScientISST and JSON API modes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buff</td><td>The received command </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2d4492b3724f0efdc58c689be11ed2ef" name="a2d4492b3724f0efdc58c689be11ed2ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d4492b3724f0efdc58c689be11ed2ef">&#9670;&nbsp;</a></span>sendFirmwareVersionPacket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendFirmwareVersionPacket </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the firmware version packet. </p>
<p >This function sends the firmware version packet. It is called when the client requests the firmware version packet. It fills one position of the send buffer with the information and marks it as ready to be sent. It also changes the lowers the send threshold to 0, so that the data is sent as soon as possible and then restores the send threshold to its previous value. </p>

</div>
</div>
<a id="ab5af5c77546cadc8c381dcea191a5a3a" name="ab5af5c77546cadc8c381dcea191a5a3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5af5c77546cadc8c381dcea191a5a3a">&#9670;&nbsp;</a></span>sendStatusPacket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendStatusPacket </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the status packet. </p>
<p >This function sends the status packet. It is called when the client requests the status packet. </p>
<p >(uint16_t*)(snd_buff[bt_curr_buff]) = i2c_sensor_values.oxygen; (uint16_t*)(snd_buff[bt_curr_buff]+2) = i2c_sensor_values.heart_rate; (uint16_t*)(snd_buff[bt_curr_buff]+4) = (uint16_t)i2c_sensor_values.confidence; (uint16_t*)(snd_buff[bt_curr_buff]+6) = (uint16_t)i2c_sensor_values.status; (uint16_t*)(snd_buff[bt_curr_buff]+8) = i2c_sensor_values.temp_obj_int; (uint16_t*)(snd_buff[bt_curr_buff]+10) = i2c_sensor_values.temp_amb_int;</p>

</div>
</div>
<a id="adcfa347fce6d5b2c4235aca5aae2bb42" name="adcfa347fce6d5b2c4235aca5aae2bb42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcfa347fce6d5b2c4235aca5aae2bb42">&#9670;&nbsp;</a></span>setSampleRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setSampleRate </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the sample rate. </p>
<p >This function sets the sample rate according to the received command. </p>

</div>
</div>
<a id="a4f1baabc30148b69a50e3e4e08270a75" name="a4f1baabc30148b69a50e3e4e08270a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f1baabc30148b69a50e3e4e08270a75">&#9670;&nbsp;</a></span>startAcquisition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void startAcquisition </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the acquisition. </p>
<p >This function starts the acquisition according to the received command. It starts the ADC and the timer. It also sets the acquisition mode (live or simulated). It also changes the LED state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buff</td><td>The received command </td></tr>
    <tr><td class="paramname">cmd</td><td>The command (identifies if it is a live or a simulated acquisition) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>If changed, change same code in API (warning on identified on code) </dd></dl>

</div>
</div>
<a id="ae888ca03d182fe258b3e3f0f528fdb24" name="ae888ca03d182fe258b3e3f0f528fdb24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae888ca03d182fe258b3e3f0f528fdb24">&#9670;&nbsp;</a></span>stopAcquisition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stopAcquisition </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the acquisition. </p>
<p >This function stops the acquisition. It stops the ADC and the timer. It also changes the LED state. It cleans all buffers and active channels. </p>

</div>
</div>
<a id="a768fa7b96f28d9b1bd5175d701bab3cf" name="a768fa7b96f28d9b1bd5175d701bab3cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a768fa7b96f28d9b1bd5175d701bab3cf">&#9670;&nbsp;</a></span>triggerDAC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void triggerDAC </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set output DAC level. </p>
<p >This function sets the output DAC level according to the received command. //TODO: Confirm this </p>

</div>
</div>
<a id="a911de171ac9bb21aa35c3c35f21eeb52" name="a911de171ac9bb21aa35c3c35f21eeb52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a911de171ac9bb21aa35c3c35f21eeb52">&#9670;&nbsp;</a></span>triggerGpio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void triggerGpio </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set output GPIO levels. </p>
<p >This function sets the output GPIO levels according to the received command. //TODO: Confirm this </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
