<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Scientisst: scientisst.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Scientisst
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">scientisst.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Main header file for the Scientisst firmware.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;cJSON.h&quot;</code><br />
<code>#include &quot;<a class="el" href="com_8h_source.html">com.h</a>&quot;</code><br />
<code>#include &quot;driver/spi_master.h&quot;</code><br />
<code>#include &quot;driver/timer.h&quot;</code><br />
<code>#include &quot;esp_adc_cal.h&quot;</code><br />
<code>#include &quot;esp_bt_device.h&quot;</code><br />
<code>#include &quot;esp_bt_main.h&quot;</code><br />
<code>#include &quot;esp_gap_bt_api.h&quot;</code><br />
<code>#include &quot;esp_log.h&quot;</code><br />
<code>#include &quot;esp_netif.h&quot;</code><br />
<code>#include &quot;esp_spp_api.h&quot;</code><br />
<code>#include &quot;freertos/FreeRTOS.h&quot;</code><br />
<code>#include &quot;freertos/semphr.h&quot;</code><br />
<code>#include &quot;freertos/task.h&quot;</code><br />
<code>#include &quot;nvs.h&quot;</code><br />
<code>#include &quot;nvs_flash.h&quot;</code><br />
<code>#include &quot;sys/time.h&quot;</code><br />
<code>#include &quot;time.h&quot;</code><br />
<code>#include &quot;<a class="el" href="version_8h_source.html">version.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="wifi_8h_source.html">wifi.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for scientisst.h:</div>
<div class="dyncontent">
<div class="center"><img src="scientisst_8h__incl.png" border="0" usemap="#ascientisst_8h" alt=""/></div>
<map name="ascientisst_8h" id="ascientisst_8h">
<area shape="rect" title="Main header file for the Scientisst firmware." alt="" coords="1316,5,1412,32"/>
<area shape="rect" title=" " alt="" coords="5,80,88,107"/>
<area shape="rect" title=" " alt="" coords="1578,155,1649,181"/>
<area shape="rect" title=" " alt="" coords="92,155,159,181"/>
<area shape="rect" title=" " alt="" coords="250,80,321,107"/>
<area shape="rect" title=" " alt="" coords="345,80,418,107"/>
<area shape="rect" href="com_8h.html" title="This file contains the definitions of the functions used to process the received data." alt="" coords="163,80,226,107"/>
<area shape="rect" title=" " alt="" coords="493,80,640,107"/>
<area shape="rect" title=" " alt="" coords="665,80,775,107"/>
<area shape="rect" title=" " alt="" coords="799,80,913,107"/>
<area shape="rect" title=" " alt="" coords="937,80,1063,107"/>
<area shape="rect" title=" " alt="" coords="1088,80,1205,107"/>
<area shape="rect" title=" " alt="" coords="1230,80,1365,107"/>
<area shape="rect" title=" " alt="" coords="1389,80,1473,107"/>
<area shape="rect" title=" " alt="" coords="1497,80,1591,107"/>
<area shape="rect" title=" " alt="" coords="1615,80,1729,107"/>
<area shape="rect" title=" " alt="" coords="1754,80,1905,107"/>
<area shape="rect" title=" " alt="" coords="1929,80,2066,107"/>
<area shape="rect" title=" " alt="" coords="2091,80,2208,107"/>
<area shape="rect" title=" " alt="" coords="2233,80,2290,107"/>
<area shape="rect" title=" " alt="" coords="2314,80,2409,107"/>
<area shape="rect" title=" " alt="" coords="2433,80,2524,107"/>
<area shape="rect" title=" " alt="" coords="2548,80,2612,107"/>
<area shape="rect" href="version_8h.html" title="Auto&#45;generated file containing the firmware version number." alt="" coords="2636,80,2719,107"/>
<area shape="rect" href="wifi_8h.html" title="Wifi functions definitions and relevant defines." alt="" coords="2743,80,2801,107"/>
<area shape="rect" title=" " alt="" coords="183,155,279,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="scientisst_8h__dep__incl.png" border="0" usemap="#ascientisst_8hdep" alt=""/></div>
<map name="ascientisst_8hdep" id="ascientisst_8hdep">
<area shape="rect" title="Main header file for the Scientisst firmware." alt="" coords="655,5,751,32"/>
<area shape="rect" href="adc_8c.html" title="ADC interactions functions file." alt="" coords="5,80,61,107"/>
<area shape="rect" href="ble_8c.html" title="Bluetooth Low Energy (BLE) mode functions." alt="" coords="85,80,139,107"/>
<area shape="rect" href="bt_8c.html" title="BT communication file with some general functions also." alt="" coords="163,80,210,107"/>
<area shape="rect" href="com_8c.html" title="This file contains the functions that handle the communication with the client." alt="" coords="235,80,296,107"/>
<area shape="rect" href="gpio_8c.html" title="GPIO interactions." alt="" coords="320,80,381,107"/>
<area shape="rect" href="main_8c.html" title="Main file for the Scientisst project." alt="" coords="405,80,472,107"/>
<area shape="rect" href="scientisst_8c.html" title="Main file for the Scientisst firmware." alt="" coords="497,80,591,107"/>
<area shape="rect" href="sd__card_8c.html" title="SD card driver. This file implements the SD card driver." alt="" coords="616,80,699,107"/>
<area shape="rect" href="spi_8c.html" title="This file contains the definitions of the functions used to communicate with the external ADCs." alt="" coords="723,80,775,107"/>
<area shape="rect" href="tcp_8c.html" title="Header file for the TCP server and client functions." alt="" coords="800,80,853,107"/>
<area shape="rect" href="timer_8c.html" title="Timer functions for the Scientisst firmware." alt="" coords="877,80,944,107"/>
<area shape="rect" href="uart_8c.html" title="UART functions." alt="" coords="968,80,1027,107"/>
<area shape="rect" href="udp_8c.html" title="Contains functions to send data over UDP." alt="" coords="1051,80,1109,107"/>
<area shape="rect" href="wifi_8c.html" title="Wifi functions." alt="" coords="1133,80,1189,107"/>
<area shape="rect" href="wifi__rest__server_8c.html" title="This file contains the code for the RESTful API server." alt="" coords="1214,80,1349,107"/>
<area shape="rect" href="ws_8c.html" title="Websocket server." alt="" coords="1373,80,1424,107"/>
</map>
</div>
</div>
<p><a href="scientisst_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab7b84ee9b544d80dcede5792059e8613"><td class="memItemLeft" align="right" valign="top"><a id="ab7b84ee9b544d80dcede5792059e8613" name="ab7b84ee9b544d80dcede5792059e8613"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>FIRMWARE_BITALINO_VERSION</b>&#160;&#160;&#160;&quot;BITalino_v5.1\n&quot;</td></tr>
<tr class="separator:ab7b84ee9b544d80dcede5792059e8613"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a67371293d974b9087bcb16643de878f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scientisst_8h.html#a67371293d974b9087bcb16643de878f0">initScientisst</a> (void)</td></tr>
<tr class="memdesc:a67371293d974b9087bcb16643de878f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">scientisst-firmware main function  <a href="scientisst_8h.html#a67371293d974b9087bcb16643de878f0">More...</a><br /></td></tr>
<tr class="separator:a67371293d974b9087bcb16643de878f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a19e62782c492aeba9e3304a4312d222a"><td class="memItemLeft" align="right" valign="top"><a id="a19e62782c492aeba9e3304a4312d222a" name="a19e62782c492aeba9e3304a4312d222a"></a>
TaskHandle_t&#160;</td><td class="memItemRight" valign="bottom"><b>send_task</b></td></tr>
<tr class="separator:a19e62782c492aeba9e3304a4312d222a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fe8dff9b6854a628097650435e9dfe9"><td class="memItemLeft" align="right" valign="top"><a id="a5fe8dff9b6854a628097650435e9dfe9" name="a5fe8dff9b6854a628097650435e9dfe9"></a>
TaskHandle_t&#160;</td><td class="memItemRight" valign="bottom"><b>abat_task</b></td></tr>
<tr class="separator:a5fe8dff9b6854a628097650435e9dfe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a571f93394be93268e6c09c1fedf548f1"><td class="memItemLeft" align="right" valign="top"><a id="a571f93394be93268e6c09c1fedf548f1" name="a571f93394be93268e6c09c1fedf548f1"></a>
TaskHandle_t&#160;</td><td class="memItemRight" valign="bottom"><b>rcv_task</b></td></tr>
<tr class="separator:a571f93394be93268e6c09c1fedf548f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ca7559f4e9fd35d6cd5dba106c707a2"><td class="memItemLeft" align="right" valign="top"><a id="a3ca7559f4e9fd35d6cd5dba106c707a2" name="a3ca7559f4e9fd35d6cd5dba106c707a2"></a>
TaskHandle_t&#160;</td><td class="memItemRight" valign="bottom"><b>acq_adc1_task</b></td></tr>
<tr class="separator:a3ca7559f4e9fd35d6cd5dba106c707a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3beecfd9909f92fdd031c31132f8b68"><td class="memItemLeft" align="right" valign="top"><a id="ac3beecfd9909f92fdd031c31132f8b68" name="ac3beecfd9909f92fdd031c31132f8b68"></a>
TaskHandle_t&#160;</td><td class="memItemRight" valign="bottom"><b>acq_adc_ext_task</b></td></tr>
<tr class="separator:ac3beecfd9909f92fdd031c31132f8b68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ccd8921f38d8d73068731023f739eac"><td class="memItemLeft" align="right" valign="top"><a id="a4ccd8921f38d8d73068731023f739eac" name="a4ccd8921f38d8d73068731023f739eac"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>send_fd</b></td></tr>
<tr class="separator:a4ccd8921f38d8d73068731023f739eac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2b4deaf1aa96b3b76c622733874f9ef"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scientisst_8h.html#ac2b4deaf1aa96b3b76c622733874f9ef">snd_buff</a> [NUM_BUFFERS]</td></tr>
<tr class="separator:ac2b4deaf1aa96b3b76c622733874f9ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c5bd8b98f34726adca0d5d4496d5ee"><td class="memItemLeft" align="right" valign="top"><a id="aa3c5bd8b98f34726adca0d5d4496d5ee" name="aa3c5bd8b98f34726adca0d5d4496d5ee"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>send_buff_len</b></td></tr>
<tr class="memdesc:aa3c5bd8b98f34726adca0d5d4496d5ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length of each send buff. <br /></td></tr>
<tr class="separator:aa3c5bd8b98f34726adca0d5d4496d5ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee3ef59ff651fe7e6a9c273affdd5d5a"><td class="memItemLeft" align="right" valign="top"><a id="aee3ef59ff651fe7e6a9c273affdd5d5a" name="aee3ef59ff651fe7e6a9c273affdd5d5a"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>packet_size</b></td></tr>
<tr class="memdesc:aee3ef59ff651fe7e6a9c273affdd5d5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current packet size (dependent on number of channels used) <br /></td></tr>
<tr class="separator:aee3ef59ff651fe7e6a9c273affdd5d5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1eff9de07f17a3448412996de8c73bf"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scientisst_8h.html#ad1eff9de07f17a3448412996de8c73bf">snd_buff_idx</a> []</td></tr>
<tr class="separator:ad1eff9de07f17a3448412996de8c73bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52eb8d8cff704c0ff443e47dc2207c42"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scientisst_8h.html#a52eb8d8cff704c0ff443e47dc2207c42">bt_buffs_to_send</a> []</td></tr>
<tr class="separator:a52eb8d8cff704c0ff443e47dc2207c42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d6370009dfaaa6352d94d10645c11b0"><td class="memItemLeft" align="right" valign="top"><a id="a0d6370009dfaaa6352d94d10645c11b0" name="a0d6370009dfaaa6352d94d10645c11b0"></a>
DRAM_ATTR const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>crc_table</b> []</td></tr>
<tr class="separator:a0d6370009dfaaa6352d94d10645c11b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30ce041a03a995813db2cc992f965f27"><td class="memItemLeft" align="right" valign="top"><a id="a30ce041a03a995813db2cc992f965f27" name="a30ce041a03a995813db2cc992f965f27"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>crc_seq</b></td></tr>
<tr class="separator:a30ce041a03a995813db2cc992f965f27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7605e205ad44cf175ae6836d09f5f3f3"><td class="memItemLeft" align="right" valign="top"><a id="a7605e205ad44cf175ae6836d09f5f3f3" name="a7605e205ad44cf175ae6836d09f5f3f3"></a>
DRAM_ATTR const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>analog_channels</b> []</td></tr>
<tr class="separator:a7605e205ad44cf175ae6836d09f5f3f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a14f11520695813aa1d2024f651809"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scientisst_8h.html#a36a14f11520695813aa1d2024f651809">active_internal_chs</a> []</td></tr>
<tr class="separator:a36a14f11520695813aa1d2024f651809"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42d56683542bef172366ecb20446ef54"><td class="memItemLeft" align="right" valign="top"><a id="a42d56683542bef172366ecb20446ef54" name="a42d56683542bef172366ecb20446ef54"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>num_intern_active_chs</b></td></tr>
<tr class="separator:a42d56683542bef172366ecb20446ef54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec948fb30e99b1eda7e3d9ff741d417a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scientisst_8h.html#aec948fb30e99b1eda7e3d9ff741d417a">op_mode</a></td></tr>
<tr class="separator:aec948fb30e99b1eda7e3d9ff741d417a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fba55d9442e7dba4623825cd737e520"><td class="memItemLeft" align="right" valign="top"><a id="a2fba55d9442e7dba4623825cd737e520" name="a2fba55d9442e7dba4623825cd737e520"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>sample_rate</b></td></tr>
<tr class="separator:a2fba55d9442e7dba4623825cd737e520"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7026e7526fc83dfe44240b66b2b957c1"><td class="memItemLeft" align="right" valign="top"><a id="a7026e7526fc83dfe44240b66b2b957c1" name="a7026e7526fc83dfe44240b66b2b957c1"></a>
spi_device_handle_t&#160;</td><td class="memItemRight" valign="bottom"><b>adc_ext_spi_handler</b></td></tr>
<tr class="separator:a7026e7526fc83dfe44240b66b2b957c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fad2ab5c7e2add7ca0a5aa441872762"><td class="memItemLeft" align="right" valign="top"><a id="a8fad2ab5c7e2add7ca0a5aa441872762" name="a8fad2ab5c7e2add7ca0a5aa441872762"></a>
esp_adc_cal_characteristics_t&#160;</td><td class="memItemRight" valign="bottom"><b>adc1_chars</b></td></tr>
<tr class="separator:a8fad2ab5c7e2add7ca0a5aa441872762"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe025b99b3111cc4a2f1d9b33f963504"><td class="memItemLeft" align="right" valign="top"><a id="abe025b99b3111cc4a2f1d9b33f963504" name="abe025b99b3111cc4a2f1d9b33f963504"></a>
esp_adc_cal_characteristics_t&#160;</td><td class="memItemRight" valign="bottom"><b>adc2_chars</b></td></tr>
<tr class="separator:abe025b99b3111cc4a2f1d9b33f963504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d38ff533fa597bf3b8c9e2b4c07f8f2"><td class="memItemLeft" align="right" valign="top"><a id="a4d38ff533fa597bf3b8c9e2b4c07f8f2" name="a4d38ff533fa597bf3b8c9e2b4c07f8f2"></a>
char&#160;</td><td class="memItemRight" valign="bottom"><b>device_name</b> []</td></tr>
<tr class="separator:a4d38ff533fa597bf3b8c9e2b4c07f8f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a5410ab9ad2ae9325099b2315faf334"><td class="memItemLeft" align="right" valign="top"><a id="a5a5410ab9ad2ae9325099b2315faf334" name="a5a5410ab9ad2ae9325099b2315faf334"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>send_busy</b></td></tr>
<tr class="separator:a5a5410ab9ad2ae9325099b2315faf334"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a559e662c57addba866d0503d53160930"><td class="memItemLeft" align="right" valign="top"><a id="a559e662c57addba866d0503d53160930" name="a559e662c57addba866d0503d53160930"></a>
SemaphoreHandle_t&#160;</td><td class="memItemRight" valign="bottom"><b>bt_buffs_to_send_mutex</b></td></tr>
<tr class="separator:a559e662c57addba866d0503d53160930"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba2be5e3b1baddd09080812b975bf2fc"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scientisst_8h.html#aba2be5e3b1baddd09080812b975bf2fc">send_threshold</a></td></tr>
<tr class="separator:aba2be5e3b1baddd09080812b975bf2fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8607928ef2ef25e6de81c163efc5f806"><td class="memItemLeft" align="right" valign="top"><a id="a8607928ef2ef25e6de81c163efc5f806" name="a8607928ef2ef25e6de81c163efc5f806"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>bt_curr_buff</b></td></tr>
<tr class="memdesc:a8607928ef2ef25e6de81c163efc5f806"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of the buffer that bt task is currently sending. <br /></td></tr>
<tr class="separator:a8607928ef2ef25e6de81c163efc5f806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf58f1ea0e678533fafefedcba16ce39"><td class="memItemLeft" align="right" valign="top"><a id="adf58f1ea0e678533fafefedcba16ce39" name="adf58f1ea0e678533fafefedcba16ce39"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>acq_curr_buff</b></td></tr>
<tr class="memdesc:adf58f1ea0e678533fafefedcba16ce39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of the buffer that adc task is currently using. <br /></td></tr>
<tr class="separator:adf58f1ea0e678533fafefedcba16ce39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6369df7f65a4b328aa3de63c2f6be78"><td class="memItemLeft" align="right" valign="top"><a id="ae6369df7f65a4b328aa3de63c2f6be78" name="ae6369df7f65a4b328aa3de63c2f6be78"></a>
<a class="el" href="structApi__Config.html">Api_Config</a>&#160;</td><td class="memItemRight" valign="bottom"><b>api_config</b></td></tr>
<tr class="separator:ae6369df7f65a4b328aa3de63c2f6be78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a125ae3bfd1500ab33445e8e30dbb1535"><td class="memItemLeft" align="right" valign="top"><a id="a125ae3bfd1500ab33445e8e30dbb1535" name="a125ae3bfd1500ab33445e8e30dbb1535"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>active_ext_chs</b> []</td></tr>
<tr class="memdesc:a125ae3bfd1500ab33445e8e30dbb1535"><td class="mdescLeft">&#160;</td><td class="mdescRight">Active external channels | If all channels are active: = {7, 6}. <br /></td></tr>
<tr class="separator:a125ae3bfd1500ab33445e8e30dbb1535"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af84510851ca7161ffec1186e5af655b4"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scientisst_8h.html#af84510851ca7161ffec1186e5af655b4">adc_ext_samples</a> []</td></tr>
<tr class="separator:af84510851ca7161ffec1186e5af655b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fceb86dcc2db967ea153357ac554190"><td class="memItemLeft" align="right" valign="top"><a id="a3fceb86dcc2db967ea153357ac554190" name="a3fceb86dcc2db967ea153357ac554190"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>num_extern_active_chs</b></td></tr>
<tr class="separator:a3fceb86dcc2db967ea153357ac554190"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65f742e8d4496f2431894fafe695cc53"><td class="memItemLeft" align="right" valign="top"><a id="a65f742e8d4496f2431894fafe695cc53" name="a65f742e8d4496f2431894fafe695cc53"></a>
cJSON *&#160;</td><td class="memItemRight" valign="bottom"><b>json</b></td></tr>
<tr class="separator:a65f742e8d4496f2431894fafe695cc53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7027b4521fb116c86199e5ccfce5bf73"><td class="memItemLeft" align="right" valign="top"><a id="a7027b4521fb116c86199e5ccfce5bf73" name="a7027b4521fb116c86199e5ccfce5bf73"></a>
DRAM_ATTR const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>sin10Hz</b> []</td></tr>
<tr class="separator:a7027b4521fb116c86199e5ccfce5bf73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7140e27a5abc7a2b038347434f0374e"><td class="memItemLeft" align="right" valign="top"><a id="ae7140e27a5abc7a2b038347434f0374e" name="ae7140e27a5abc7a2b038347434f0374e"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>sim_flag</b></td></tr>
<tr class="separator:ae7140e27a5abc7a2b038347434f0374e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bbddce911432732664074cf4c252288"><td class="memItemLeft" align="right" valign="top"><a id="a1bbddce911432732664074cf4c252288" name="a1bbddce911432732664074cf4c252288"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>sin_i</b></td></tr>
<tr class="separator:a1bbddce911432732664074cf4c252288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01b45c2c1d6003886ce22d614e87dd31"><td class="memItemLeft" align="right" valign="top"><a id="a01b45c2c1d6003886ce22d614e87dd31" name="a01b45c2c1d6003886ce22d614e87dd31"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>gpio_out_state</b> []</td></tr>
<tr class="memdesc:a01b45c2c1d6003886ce22d614e87dd31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output of 01 &amp; O2 (O0 &amp; O1) <br /></td></tr>
<tr class="separator:a01b45c2c1d6003886ce22d614e87dd31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d6caeccf40e673721eb7ce26f033531"><td class="memItemLeft" align="right" valign="top"><a id="a9d6caeccf40e673721eb7ce26f033531" name="a9d6caeccf40e673721eb7ce26f033531"></a>
spi_transaction_t&#160;</td><td class="memItemRight" valign="bottom"><b>adc_ext_trans</b></td></tr>
<tr class="separator:a9d6caeccf40e673721eb7ce26f033531"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a884fc7df05c9eaf5001d47dc09cc7194"><td class="memItemLeft" align="right" valign="top"><a id="a884fc7df05c9eaf5001d47dc09cc7194" name="a884fc7df05c9eaf5001d47dc09cc7194"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>battery_threshold</b></td></tr>
<tr class="separator:a884fc7df05c9eaf5001d47dc09cc7194"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9cc3ca85c2647a56048a756de6147e1"><td class="memItemLeft" align="right" valign="top"><a id="ad9cc3ca85c2647a56048a756de6147e1" name="ad9cc3ca85c2647a56048a756de6147e1"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>com_mode</b></td></tr>
<tr class="separator:ad9cc3ca85c2647a56048a756de6147e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad24c7510f51acaac27b62d21c280b747"><td class="memItemLeft" align="right" valign="top"><a id="ad24c7510f51acaac27b62d21c280b747" name="ad24c7510f51acaac27b62d21c280b747"></a>
<a class="el" href="structop__settings__info__t.html">op_settings_info_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>op_settings</b></td></tr>
<tr class="separator:ad24c7510f51acaac27b62d21c280b747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a310c92dadfc8850f5c31ed6fd5dbf3d4"><td class="memItemLeft" align="right" valign="top"><a id="a310c92dadfc8850f5c31ed6fd5dbf3d4" name="a310c92dadfc8850f5c31ed6fd5dbf3d4"></a>
esp_err_t(*&#160;</td><td class="memItemRight" valign="bottom"><b>send_func</b> )(uint32_t, int, uint8_t *)</td></tr>
<tr class="memdesc:a310c92dadfc8850f5c31ed6fd5dbf3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send function pointer. <br /></td></tr>
<tr class="separator:a310c92dadfc8850f5c31ed6fd5dbf3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a304133f917e93ba96a348df51387dc92"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="scientisst_8h.html#a304133f917e93ba96a348df51387dc92">is_op_settings_valid</a></td></tr>
<tr class="separator:a304133f917e93ba96a348df51387dc92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b8ea1c4cc9d70f37e8c0e3e97db137d"><td class="memItemLeft" align="right" valign="top"><a id="a5b8ea1c4cc9d70f37e8c0e3e97db137d" name="a5b8ea1c4cc9d70f37e8c0e3e97db137d"></a>
esp_netif_t *&#160;</td><td class="memItemRight" valign="bottom"><b>netif_object</b></td></tr>
<tr class="separator:a5b8ea1c4cc9d70f37e8c0e3e97db137d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38cf39cf8c11960d72d032bf96426547"><td class="memItemLeft" align="right" valign="top"><a id="a38cf39cf8c11960d72d032bf96426547" name="a38cf39cf8c11960d72d032bf96426547"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>first_failed_send</b></td></tr>
<tr class="separator:a38cf39cf8c11960d72d032bf96426547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a677980e26e55da72e6d7091450572300"><td class="memItemLeft" align="right" valign="top"><a id="a677980e26e55da72e6d7091450572300" name="a677980e26e55da72e6d7091450572300"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>ext_adc_raw_data</b> [3]</td></tr>
<tr class="memdesc:a677980e26e55da72e6d7091450572300"><td class="mdescLeft">&#160;</td><td class="mdescRight">Raw data from external adc. <br /></td></tr>
<tr class="separator:a677980e26e55da72e6d7091450572300"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Main header file for the Scientisst firmware. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a67371293d974b9087bcb16643de878f0" name="a67371293d974b9087bcb16643de878f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67371293d974b9087bcb16643de878f0">&#9670;&nbsp;</a></span>initScientisst()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initScientisst </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>scientisst-firmware main function </p>
<p >Creates Mutex, initializes nvs, loads op_settings from flash, initializes wifi, bluetooth, adc, i2c etc. If pin 1 is enabled, enters config mode. If wifi mode, tries to connect to wifi network. If connection is unsuccessful, enter config mode. Either start web server (config mode), TCP server (wifi mode) or bluetooth. Starts send data task, adc task and adcExt task. If wifi start rcv task; else, start battery task (adc2) task. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a36a14f11520695813aa1d2024f651809" name="a36a14f11520695813aa1d2024f651809"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36a14f11520695813aa1d2024f651809">&#9670;&nbsp;</a></span>active_internal_chs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t active_internal_chs[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Active internal channels | If all channels are active: = {5, 4, 3, 2, 1, 0} </p>

</div>
</div>
<a id="af84510851ca7161ffec1186e5af655b4" name="af84510851ca7161ffec1186e5af655b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af84510851ca7161ffec1186e5af655b4">&#9670;&nbsp;</a></span>adc_ext_samples</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t adc_ext_samples[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Samples from external adc get stored here before being incorporated into frame </p>

</div>
</div>
<a id="a52eb8d8cff704c0ff443e47dc2207c42" name="a52eb8d8cff704c0ff443e47dc2207c42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52eb8d8cff704c0ff443e47dc2207c42">&#9670;&nbsp;</a></span>bt_buffs_to_send</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t bt_buffs_to_send[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >If element 0 is set to 1, bt task has to send snd_buff[0] </p>

</div>
</div>
<a id="a304133f917e93ba96a348df51387dc92" name="a304133f917e93ba96a348df51387dc92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a304133f917e93ba96a348df51387dc92">&#9670;&nbsp;</a></span>is_op_settings_valid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t is_op_settings_valid</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >&lt; Struct that holds the wifi acquisition configuration (e.g. SSID, password, sample rate...) Flag that indicates if a valid op_settings has been read successfuly from flash </p>

</div>
</div>
<a id="aec948fb30e99b1eda7e3d9ff741d417a" name="aec948fb30e99b1eda7e3d9ff741d417a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec948fb30e99b1eda7e3d9ff741d417a">&#9670;&nbsp;</a></span>op_mode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t op_mode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Flag that indicastes if op mode is on (idle, live or config) </p>

</div>
</div>
<a id="aba2be5e3b1baddd09080812b975bf2fc" name="aba2be5e3b1baddd09080812b975bf2fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba2be5e3b1baddd09080812b975bf2fc">&#9670;&nbsp;</a></span>send_threshold</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t send_threshold</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Amount of bytes a buffer needs to have filled with packets in order to trigger a send </p>

</div>
</div>
<a id="ac2b4deaf1aa96b3b76c622733874f9ef" name="ac2b4deaf1aa96b3b76c622733874f9ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2b4deaf1aa96b3b76c622733874f9ef">&#9670;&nbsp;</a></span>snd_buff</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* snd_buff[NUM_BUFFERS]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Data structure to hold the data to be sent through bluetooth </p>

</div>
</div>
<a id="ad1eff9de07f17a3448412996de8c73bf" name="ad1eff9de07f17a3448412996de8c73bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1eff9de07f17a3448412996de8c73bf">&#9670;&nbsp;</a></span>snd_buff_idx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t snd_buff_idx[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >It contains, for each buffer, the index of the first free element in the respective buffer </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
