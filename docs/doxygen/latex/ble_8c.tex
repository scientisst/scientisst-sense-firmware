\hypertarget{ble_8c}{}\doxysection{ble.\+c File Reference}
\label{ble_8c}\index{ble.c@{ble.c}}


Bluetooth Low Energy (BLE) mode functions.  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include \char`\"{}bt.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}com.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}esp\+\_\+bt.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}esp\+\_\+bt\+\_\+defs.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}esp\+\_\+bt\+\_\+main.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}esp\+\_\+gap\+\_\+ble\+\_\+api.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}esp\+\_\+gatt\+\_\+common\+\_\+api.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}esp\+\_\+gatts\+\_\+api.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}esp\+\_\+log.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}esp\+\_\+system.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}esp\+\_\+timer.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}freertos/\+Free\+RTOS.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}freertos/event\+\_\+groups.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}freertos/semphr.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}freertos/task.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}macros.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}nvs\+\_\+flash.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}scientisst.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sdkconfig.\+h\char`\"{}}\newline
Include dependency graph for ble.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{ble_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structgatts__profile__inst}{gatts\+\_\+profile\+\_\+inst}}
\item 
struct \mbox{\hyperlink{structprepare__type__env__t}{prepare\+\_\+type\+\_\+env\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{ble_8c_a341a3dc9e809d3a35f6bac5460e4e865}\label{ble_8c_a341a3dc9e809d3a35f6bac5460e4e865}} 
\#define {\bfseries SECOND\+\_\+\+TO\+\_\+\+USECOND}~1000000
\item 
\mbox{\Hypertarget{ble_8c_a7851c5a0cc928e6ff7770d9fbda6bba2}\label{ble_8c_a7851c5a0cc928e6ff7770d9fbda6bba2}} 
\#define {\bfseries GATTS\+\_\+\+TAG}~\char`\"{}GATTS\+\_\+\+DEMO\char`\"{}
\item 
\mbox{\Hypertarget{ble_8c_ae50f92ffa8c23123fcd7d4269b8a1d01}\label{ble_8c_ae50f92ffa8c23123fcd7d4269b8a1d01}} 
\#define {\bfseries GATTS\+\_\+\+NOTIFY\+\_\+\+LEN}~490
\item 
\mbox{\Hypertarget{ble_8c_a2bc93e3db5fa1d2efe6d23c4c357aa9f}\label{ble_8c_a2bc93e3db5fa1d2efe6d23c4c357aa9f}} 
\#define {\bfseries GATTS\+\_\+\+SERVICE\+\_\+\+UUID\+\_\+\+TEST\+\_\+A}~0x00\+FF
\item 
\mbox{\Hypertarget{ble_8c_a557dd25f16aa71b46c79f24a8d4d97e5}\label{ble_8c_a557dd25f16aa71b46c79f24a8d4d97e5}} 
\#define {\bfseries GATTS\+\_\+\+CHAR\+\_\+\+UUID\+\_\+\+TEST\+\_\+A}~0x\+FF01
\item 
\mbox{\Hypertarget{ble_8c_ad8df8660945808efc35a6e5c2f509be7}\label{ble_8c_ad8df8660945808efc35a6e5c2f509be7}} 
\#define {\bfseries GATTS\+\_\+\+DESCR\+\_\+\+UUID\+\_\+\+TEST\+\_\+A}~0x3333
\item 
\mbox{\Hypertarget{ble_8c_a02292ae673e16cbb41795b4117f41ea0}\label{ble_8c_a02292ae673e16cbb41795b4117f41ea0}} 
\#define {\bfseries GATTS\+\_\+\+NUM\+\_\+\+HANDLE\+\_\+\+TEST\+\_\+A}~4
\item 
\mbox{\Hypertarget{ble_8c_adf407e7f8a1575af451dd51360c80288}\label{ble_8c_adf407e7f8a1575af451dd51360c80288}} 
\#define {\bfseries GATTS\+\_\+\+SERVICE\+\_\+\+UUID\+\_\+\+TEST\+\_\+B}~0x00\+EE
\item 
\mbox{\Hypertarget{ble_8c_ada1a71fba4b94955763bc3ec930737bc}\label{ble_8c_ada1a71fba4b94955763bc3ec930737bc}} 
\#define {\bfseries GATTS\+\_\+\+CHAR\+\_\+\+UUID\+\_\+\+TEST\+\_\+B}~0x\+EE01
\item 
\mbox{\Hypertarget{ble_8c_a0828c6eac2ea4a1d1c3817f94680d84e}\label{ble_8c_a0828c6eac2ea4a1d1c3817f94680d84e}} 
\#define {\bfseries GATTS\+\_\+\+DESCR\+\_\+\+UUID\+\_\+\+TEST\+\_\+B}~0x2222
\item 
\mbox{\Hypertarget{ble_8c_a58acb9f781fa089d3aee6e72397b6f43}\label{ble_8c_a58acb9f781fa089d3aee6e72397b6f43}} 
\#define {\bfseries GATTS\+\_\+\+NUM\+\_\+\+HANDLE\+\_\+\+TEST\+\_\+B}~4
\item 
\mbox{\Hypertarget{ble_8c_a5b9a50db3d4856589c917150a2f45eaf}\label{ble_8c_a5b9a50db3d4856589c917150a2f45eaf}} 
\#define {\bfseries TEST\+\_\+\+MANUFACTURER\+\_\+\+DATA\+\_\+\+LEN}~17
\item 
\mbox{\Hypertarget{ble_8c_af754f155149c2758e19af40c7b639f05}\label{ble_8c_af754f155149c2758e19af40c7b639f05}} 
\#define {\bfseries GATTS\+\_\+\+DEMO\+\_\+\+CHAR\+\_\+\+VAL\+\_\+\+LEN\+\_\+\+MAX}~0x40
\item 
\mbox{\Hypertarget{ble_8c_a7a3ec99addf88f1f771fd5303c51f75c}\label{ble_8c_a7a3ec99addf88f1f771fd5303c51f75c}} 
\#define {\bfseries PREPARE\+\_\+\+BUF\+\_\+\+MAX\+\_\+\+SIZE}~1024
\item 
\mbox{\Hypertarget{ble_8c_a5cadbbd03e72d3f26c9165115628b015}\label{ble_8c_a5cadbbd03e72d3f26c9165115628b015}} 
\#define {\bfseries adv\+\_\+config\+\_\+flag}~(1 $<$$<$ 0)
\item 
\mbox{\Hypertarget{ble_8c_ae04e4b2d6dea5c5274264345c2268fd2}\label{ble_8c_ae04e4b2d6dea5c5274264345c2268fd2}} 
\#define {\bfseries scan\+\_\+rsp\+\_\+config\+\_\+flag}~(1 $<$$<$ 1)
\item 
\mbox{\Hypertarget{ble_8c_aab6353cb3662bdc672ae8ab90df529ce}\label{ble_8c_aab6353cb3662bdc672ae8ab90df529ce}} 
\#define {\bfseries PROFILE\+\_\+\+NUM}~1
\item 
\mbox{\Hypertarget{ble_8c_a02ae63c368bf2fcbb839b01d86d9b103}\label{ble_8c_a02ae63c368bf2fcbb839b01d86d9b103}} 
\#define {\bfseries PROFILE\+\_\+\+A\+\_\+\+APP\+\_\+\+ID}~0
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{ble_8c_ace91c595b2b150a2105fc7fcbb4ec219}{example\+\_\+write\+\_\+event\+\_\+env}} (esp\+\_\+gatt\+\_\+if\+\_\+t gatts\+\_\+if, \mbox{\hyperlink{structprepare__type__env__t}{prepare\+\_\+type\+\_\+env\+\_\+t}} $\ast$prepare\+\_\+write\+\_\+env, esp\+\_\+ble\+\_\+gatts\+\_\+cb\+\_\+param\+\_\+t $\ast$param)
\begin{DoxyCompactList}\small\item\em example write event. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ble_8c_a31f6cef4c1b2631dee831e788cff230d}{example\+\_\+exec\+\_\+write\+\_\+event\+\_\+env}} (\mbox{\hyperlink{structprepare__type__env__t}{prepare\+\_\+type\+\_\+env\+\_\+t}} $\ast$prepare\+\_\+write\+\_\+env, esp\+\_\+ble\+\_\+gatts\+\_\+cb\+\_\+param\+\_\+t $\ast$param)
\begin{DoxyCompactList}\small\item\em example exec write event. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t IRAM\+\_\+\+ATTR \mbox{\hyperlink{ble_8c_a5862509057aff9bdcc9ec7ff33e7262f}{send\+Ble}} (uint32\+\_\+t fd, int len, uint8\+\_\+t $\ast$buff)
\begin{DoxyCompactList}\small\item\em send data function for BLE. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{ble_8c_ac3d87f0c3b62add644bae54b5a77fa08}{init\+Ble}} (void)
\begin{DoxyCompactList}\small\item\em BLE GATT Server Initialization. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Bluetooth Low Energy (BLE) mode functions. 

This file contains the functions for the BLE mode. And relevant macros. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{ble_8c_a31f6cef4c1b2631dee831e788cff230d}\label{ble_8c_a31f6cef4c1b2631dee831e788cff230d}} 
\index{ble.c@{ble.c}!example\_exec\_write\_event\_env@{example\_exec\_write\_event\_env}}
\index{example\_exec\_write\_event\_env@{example\_exec\_write\_event\_env}!ble.c@{ble.c}}
\doxysubsubsection{\texorpdfstring{example\_exec\_write\_event\_env()}{example\_exec\_write\_event\_env()}}
{\footnotesize\ttfamily void example\+\_\+exec\+\_\+write\+\_\+event\+\_\+env (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structprepare__type__env__t}{prepare\+\_\+type\+\_\+env\+\_\+t}} $\ast$}]{prepare\+\_\+write\+\_\+env,  }\item[{esp\+\_\+ble\+\_\+gatts\+\_\+cb\+\_\+param\+\_\+t $\ast$}]{param }\end{DoxyParamCaption})}



example exec write event. 


\begin{DoxyParams}{Parameters}
{\em prepare\+\_\+write\+\_\+env} & Prepare Write Environment. \\
\hline
{\em param} & ESP32 BLE GATT Server Event Parameters. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ble_8c_ace91c595b2b150a2105fc7fcbb4ec219}\label{ble_8c_ace91c595b2b150a2105fc7fcbb4ec219}} 
\index{ble.c@{ble.c}!example\_write\_event\_env@{example\_write\_event\_env}}
\index{example\_write\_event\_env@{example\_write\_event\_env}!ble.c@{ble.c}}
\doxysubsubsection{\texorpdfstring{example\_write\_event\_env()}{example\_write\_event\_env()}}
{\footnotesize\ttfamily void example\+\_\+write\+\_\+event\+\_\+env (\begin{DoxyParamCaption}\item[{esp\+\_\+gatt\+\_\+if\+\_\+t}]{gatts\+\_\+if,  }\item[{\mbox{\hyperlink{structprepare__type__env__t}{prepare\+\_\+type\+\_\+env\+\_\+t}} $\ast$}]{prepare\+\_\+write\+\_\+env,  }\item[{esp\+\_\+ble\+\_\+gatts\+\_\+cb\+\_\+param\+\_\+t $\ast$}]{param }\end{DoxyParamCaption})}



example write event. 


\begin{DoxyParams}{Parameters}
{\em gatts\+\_\+if} & GATT Server Interface. \\
\hline
{\em prepare\+\_\+write\+\_\+env} & Prepare Write Environment. \\
\hline
{\em param} & ESP32 BLE GATT Server Event Parameters. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{ble_8c_ac3d87f0c3b62add644bae54b5a77fa08}\label{ble_8c_ac3d87f0c3b62add644bae54b5a77fa08}} 
\index{ble.c@{ble.c}!initBle@{initBle}}
\index{initBle@{initBle}!ble.c@{ble.c}}
\doxysubsubsection{\texorpdfstring{initBle()}{initBle()}}
{\footnotesize\ttfamily void init\+Ble (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



BLE GATT Server Initialization. 

This function initializes the BLE GATT Server. \mbox{\Hypertarget{ble_8c_a5862509057aff9bdcc9ec7ff33e7262f}\label{ble_8c_a5862509057aff9bdcc9ec7ff33e7262f}} 
\index{ble.c@{ble.c}!sendBle@{sendBle}}
\index{sendBle@{sendBle}!ble.c@{ble.c}}
\doxysubsubsection{\texorpdfstring{sendBle()}{sendBle()}}
{\footnotesize\ttfamily esp\+\_\+err\+\_\+t IRAM\+\_\+\+ATTR send\+Ble (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{fd,  }\item[{int}]{len,  }\item[{uint8\+\_\+t $\ast$}]{buff }\end{DoxyParamCaption})}



send data function for BLE. 


\begin{DoxyParams}{Parameters}
{\em fd} & File descriptor (unused for this function, created for consistency with other send functions).\\
\hline
{\em len} & Length of data.\\
\hline
{\em buff} & Data to send. \\
\hline
\end{DoxyParams}
