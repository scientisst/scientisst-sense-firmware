\hypertarget{i2c_8c}{}\doxysection{i2c.\+c File Reference}
\label{i2c_8c}\index{i2c.c@{i2c.c}}


This file contains the definitions of the functions used to communicate with the e-\/covid sensor.  


{\ttfamily \#include \char`\"{}i2c.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gpio.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}macros.\+h\char`\"{}}\newline
Include dependency graph for i2c.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{i2c_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{i2c_8c_a6a4bfebe2f8418ed7cde00a9bbfc7eee}\label{i2c_8c_a6a4bfebe2f8418ed7cde00a9bbfc7eee}} 
\#define {\bfseries MAX32664\+\_\+\+MFIO\+\_\+\+IO}~GPIO\+\_\+\+NUM\+\_\+15
\item 
\mbox{\Hypertarget{i2c_8c_abe18d5db96109c72c1cc69deb49a21ca}\label{i2c_8c_abe18d5db96109c72c1cc69deb49a21ca}} 
\#define {\bfseries MAX32664\+\_\+\+RSTN\+\_\+\+IO}~GPIO\+\_\+\+NUM\+\_\+4
\item 
\#define \mbox{\hyperlink{i2c_8c_aaa0e84f340ef5ea9db2d7624fdadaa26}{I2\+C\+\_\+\+MASTER\+\_\+\+TX\+\_\+\+BUF\+\_\+\+DISABLE}}~0
\item 
\#define \mbox{\hyperlink{i2c_8c_a37a0707200e50e3b3e9ab28b1b8d6777}{I2\+C\+\_\+\+MASTER\+\_\+\+RX\+\_\+\+BUF\+\_\+\+DISABLE}}~0
\item 
\#define \mbox{\hyperlink{i2c_8c_a7fc57d5be9f588839a00c75ef2946e17}{WRITE\+\_\+\+BIT}}~I2\+C\+\_\+\+MASTER\+\_\+\+WRITE
\item 
\#define \mbox{\hyperlink{i2c_8c_a2f493ed233e66342493f155ebda5c183}{READ\+\_\+\+BIT}}~I2\+C\+\_\+\+MASTER\+\_\+\+READ
\item 
\#define \mbox{\hyperlink{i2c_8c_a7dd22b838d2b1f22d367e6cdef04ccc3}{ACK\+\_\+\+CHECK\+\_\+\+EN}}~0x1
\item 
\#define \mbox{\hyperlink{i2c_8c_a8ad7ceb373ce664b1c2482a66537e7c0}{ACK\+\_\+\+CHECK\+\_\+\+DIS}}~0x0
\item 
\#define \mbox{\hyperlink{i2c_8c_a1d64a546dacc15052a6c4887f9d0020f}{ACK\+\_\+\+VAL}}~0x0
\item 
\#define \mbox{\hyperlink{i2c_8c_ae20bf16f65c41237e2d620ef49890781}{NACK\+\_\+\+VAL}}~0x1
\item 
\mbox{\Hypertarget{i2c_8c_ae6c8fc482550679487721a91d5c7bf4e}\label{i2c_8c_ae6c8fc482550679487721a91d5c7bf4e}} 
\#define {\bfseries TMP\+\_\+\+AMB\+\_\+\+REG\+\_\+\+ADDR}~0x06
\item 
\mbox{\Hypertarget{i2c_8c_a86926fea926b9ffb7028ec23b3863181}\label{i2c_8c_a86926fea926b9ffb7028ec23b3863181}} 
\#define {\bfseries TMP\+\_\+\+OBJ\+\_\+\+REG\+\_\+\+ADDR}~0x07
\item 
\mbox{\Hypertarget{i2c_8c_a64de47239f7056b19b66e6a0a4519874}\label{i2c_8c_a64de47239f7056b19b66e6a0a4519874}} 
\#define {\bfseries OUTPUT\+\_\+\+MODE}~0x10
\item 
\mbox{\Hypertarget{i2c_8c_a633001818f1e373aaf374546b21c8a2c}\label{i2c_8c_a633001818f1e373aaf374546b21c8a2c}} 
\#define {\bfseries ENABLE\+\_\+\+ALGORITHM}~0x52
\item 
\mbox{\Hypertarget{i2c_8c_ae2f9e404434c8a46e67d76e3070c54d2}\label{i2c_8c_ae2f9e404434c8a46e67d76e3070c54d2}} 
\#define {\bfseries ENABLE\+\_\+\+SENSOR}~0x44
\item 
\mbox{\Hypertarget{i2c_8c_a559bc99dcbf91f34fc2ba1d1dbfd5e44}\label{i2c_8c_a559bc99dcbf91f34fc2ba1d1dbfd5e44}} 
\#define {\bfseries SET\+\_\+\+FORMAT}~0
\item 
\mbox{\Hypertarget{i2c_8c_a5f3efdf20d4850c57e8f41b9f099c192}\label{i2c_8c_a5f3efdf20d4850c57e8f41b9f099c192}} 
\#define {\bfseries WRITE\+\_\+\+SET\+\_\+\+THRESHOLD}~0x01
\item 
\mbox{\Hypertarget{i2c_8c_a65822e25134ad8e32635bbb0b791714b}\label{i2c_8c_a65822e25134ad8e32635bbb0b791714b}} 
\#define {\bfseries ENABLE\+\_\+\+AGC\+\_\+\+ALGO}~0x00
\item 
\mbox{\Hypertarget{i2c_8c_ab200c02d2d56c6614d0ed3e9fd76460c}\label{i2c_8c_ab200c02d2d56c6614d0ed3e9fd76460c}} 
\#define {\bfseries ENABLE\+\_\+\+MAX30101}~0x03
\item 
\mbox{\Hypertarget{i2c_8c_a0164650ce7d49bdddeefe71de9786bff}\label{i2c_8c_a0164650ce7d49bdddeefe71de9786bff}} 
\#define {\bfseries ENABLE\+\_\+\+WHRM\+\_\+\+ALGO}~0x02
\item 
\mbox{\Hypertarget{i2c_8c_aa7913452912c446fc7149e6d98a53099}\label{i2c_8c_aa7913452912c446fc7149e6d98a53099}} 
\#define {\bfseries READ\+\_\+\+DATA\+\_\+\+OUTPUT}~0x12
\item 
\mbox{\Hypertarget{i2c_8c_a3c7d6c6ebba8ff1b849eac016413dded}\label{i2c_8c_a3c7d6c6ebba8ff1b849eac016413dded}} 
\#define {\bfseries ALGO\+\_\+\+DATA}~2
\item 
\mbox{\Hypertarget{i2c_8c_a7d44477546ebc96920125d612e718b10}\label{i2c_8c_a7d44477546ebc96920125d612e718b10}} 
\#define {\bfseries FIFO\+\_\+\+THRESHOLD}~1
\item 
\mbox{\Hypertarget{i2c_8c_a514ad415fb6125ba296793df7d1a468a}\label{i2c_8c_a514ad415fb6125ba296793df7d1a468a}} 
\#define {\bfseries ENABLE}~1
\item 
\mbox{\Hypertarget{i2c_8c_a99496f7308834e8b220f7894efa0b6ab}\label{i2c_8c_a99496f7308834e8b220f7894efa0b6ab}} 
\#define {\bfseries DISABLE}~0
\item 
\mbox{\Hypertarget{i2c_8c_af0b23eedf2352de4c1eff77e1401730c}\label{i2c_8c_af0b23eedf2352de4c1eff77e1401730c}} 
\#define {\bfseries NUM\+\_\+\+SAMPLES}~0x00
\item 
\mbox{\Hypertarget{i2c_8c_a86e49aa70fa2345f14700b4642f1e0c2}\label{i2c_8c_a86e49aa70fa2345f14700b4642f1e0c2}} 
\#define {\bfseries READ\+\_\+\+FIFO\+\_\+\+DATA}~0x01
\item 
\mbox{\Hypertarget{i2c_8c_a4ca5cb17bd1eb06a917c1a257071e97e}\label{i2c_8c_a4ca5cb17bd1eb06a917c1a257071e97e}} 
\#define {\bfseries CMD\+\_\+\+DELAY}~6
\item 
\mbox{\Hypertarget{i2c_8c_a53a792b60b916b9edb4e6199e17045fa}\label{i2c_8c_a53a792b60b916b9edb4e6199e17045fa}} 
\#define {\bfseries ENABLE\+\_\+\+CMD\+\_\+\+DELAY}~45
\item 
\mbox{\Hypertarget{i2c_8c_a17bcc42dd8282853c680074aa0e524f2}\label{i2c_8c_a17bcc42dd8282853c680074aa0e524f2}} 
\#define {\bfseries SIZE\+\_\+\+SAMPLE}~6
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{i2c_8c_af31f0b997d365cdd0ad925d2695ba398}{i2c\+Master\+Init}} (void)
\begin{DoxyCompactList}\small\item\em i2c master initialization \end{DoxyCompactList}\item 
void \mbox{\hyperlink{i2c_8c_aaf711ea2c9db8dbc43aa164c93b2a6ff}{MAX32664\+\_\+\+Init}} (void)
\begin{DoxyCompactList}\small\item\em MAX32664 initialization. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{i2c_8c_a3067e350605188bfc92ad7e33564d4d5}{MAX32664\+\_\+\+Config}} (void)
\begin{DoxyCompactList}\small\item\em Implements the necessary configurations in order to read HR+\+Sp\+O2. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{i2c_8c_a62e621e938b99bcd1762bb1dbaa92b57}{MAX32664\+\_\+\+Get\+BPM}} (uint16\+\_\+t $\ast$heart\+\_\+rate, uint16\+\_\+t $\ast$oxygen, uint8\+\_\+t $\ast$confidence, uint8\+\_\+t $\ast$status)
\begin{DoxyCompactList}\small\item\em Reads the HR values from the MAX32664. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{i2c_8c_aba4c5527f6b1485d2479d67b42c375c1}{MAX32664\+\_\+\+SMBus\+Read}} (uint8\+\_\+t slave\+\_\+addr, uint8\+\_\+t family\+\_\+byte, uint8\+\_\+t index\+\_\+byte, uint8\+\_\+t extra\+\_\+byte, uint8\+\_\+t extra\+\_\+byte\+\_\+flag, uint8\+\_\+t $\ast$rcv\+\_\+data, uint8\+\_\+t rcv\+\_\+data\+\_\+size, uint8\+\_\+t delay\+\_\+ms)
\begin{DoxyCompactList}\small\item\em MAX32664 SMBus read function. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{i2c_8c_ab23a0de89f7653802f6fa621e59a5d74}{MAX32664\+\_\+\+SMBus\+Write}} (uint8\+\_\+t slave\+\_\+addr, uint8\+\_\+t family\+\_\+byte, uint8\+\_\+t index\+\_\+byte, uint8\+\_\+t $\ast$write\+\_\+data, uint8\+\_\+t write\+\_\+data\+\_\+size, uint8\+\_\+t delay\+\_\+ms)
\begin{DoxyCompactList}\small\item\em MAX32664 SMBus write function. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{i2c_8c_ab524e7ae80ce65702ddfb2b3d3a9979c}{MLX90614\+\_\+\+Get\+Temp\+Amb}} (uint8\+\_\+t slave\+Addr, float $\ast$temp\+\_\+amb, uint16\+\_\+t $\ast$temp\+\_\+amb\+\_\+int)
\begin{DoxyCompactList}\small\item\em Get ambient temperature from MLX90614. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{i2c_8c_a9940a5b0514467c6b38ac69486edc4ab}{MLX90614\+\_\+\+Get\+Temp\+Obj}} (uint8\+\_\+t slave\+Addr, float $\ast$temp\+\_\+obj, uint16\+\_\+t $\ast$temp\+\_\+obj\+\_\+int)
\begin{DoxyCompactList}\small\item\em Get object temperature from MLX90614. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{i2c_8c_ae3171470c23d5e2358b750c0b94d9cd1}{MLX90614\+\_\+\+SMBus\+Read}} (uint8\+\_\+t slave\+Addr, uint8\+\_\+t reg\+\_\+addr, uint16\+\_\+t $\ast$data)
\begin{DoxyCompactList}\small\item\em Read data from MLX90614. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{i2c_8c_a84d9791903d3f10d0918e15469b61b99}{MLX90614\+\_\+\+Calc\+PEC}} (uint8\+\_\+t init\+PEC, uint8\+\_\+t new\+Data)
\begin{DoxyCompactList}\small\item\em Calculate PEC for MLX90614. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{i2c_8c_a84d2e153b4586609a397277c81978a73}\label{i2c_8c_a84d2e153b4586609a397277c81978a73}} 
void {\bfseries i2cscanner} (void)
\begin{DoxyCompactList}\small\item\em Scan I2C bus for devices. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file contains the definitions of the functions used to communicate with the e-\/covid sensor. 

This file contains the definitions of the functions used to communicate with the e-\/covid sensor through the I2C bus. It is specific to the e-\/covid sensor and the I2C bus used in the project. It is not a generic I2C driver. Not used anymore. 

\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{i2c_8c_a8ad7ceb373ce664b1c2482a66537e7c0}\label{i2c_8c_a8ad7ceb373ce664b1c2482a66537e7c0}} 
\index{i2c.c@{i2c.c}!ACK\_CHECK\_DIS@{ACK\_CHECK\_DIS}}
\index{ACK\_CHECK\_DIS@{ACK\_CHECK\_DIS}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{ACK\_CHECK\_DIS}{ACK\_CHECK\_DIS}}
{\footnotesize\ttfamily \#define ACK\+\_\+\+CHECK\+\_\+\+DIS~0x0}

I2C master will not check ack from slave \mbox{\Hypertarget{i2c_8c_a7dd22b838d2b1f22d367e6cdef04ccc3}\label{i2c_8c_a7dd22b838d2b1f22d367e6cdef04ccc3}} 
\index{i2c.c@{i2c.c}!ACK\_CHECK\_EN@{ACK\_CHECK\_EN}}
\index{ACK\_CHECK\_EN@{ACK\_CHECK\_EN}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{ACK\_CHECK\_EN}{ACK\_CHECK\_EN}}
{\footnotesize\ttfamily \#define ACK\+\_\+\+CHECK\+\_\+\+EN~0x1}

I2C master will check ack from slave \mbox{\Hypertarget{i2c_8c_a1d64a546dacc15052a6c4887f9d0020f}\label{i2c_8c_a1d64a546dacc15052a6c4887f9d0020f}} 
\index{i2c.c@{i2c.c}!ACK\_VAL@{ACK\_VAL}}
\index{ACK\_VAL@{ACK\_VAL}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{ACK\_VAL}{ACK\_VAL}}
{\footnotesize\ttfamily \#define ACK\+\_\+\+VAL~0x0}

I2C ack value \mbox{\Hypertarget{i2c_8c_a37a0707200e50e3b3e9ab28b1b8d6777}\label{i2c_8c_a37a0707200e50e3b3e9ab28b1b8d6777}} 
\index{i2c.c@{i2c.c}!I2C\_MASTER\_RX\_BUF\_DISABLE@{I2C\_MASTER\_RX\_BUF\_DISABLE}}
\index{I2C\_MASTER\_RX\_BUF\_DISABLE@{I2C\_MASTER\_RX\_BUF\_DISABLE}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{I2C\_MASTER\_RX\_BUF\_DISABLE}{I2C\_MASTER\_RX\_BUF\_DISABLE}}
{\footnotesize\ttfamily \#define I2\+C\+\_\+\+MASTER\+\_\+\+RX\+\_\+\+BUF\+\_\+\+DISABLE~0}

I2C master doesn\textquotesingle{}t need buffer \mbox{\Hypertarget{i2c_8c_aaa0e84f340ef5ea9db2d7624fdadaa26}\label{i2c_8c_aaa0e84f340ef5ea9db2d7624fdadaa26}} 
\index{i2c.c@{i2c.c}!I2C\_MASTER\_TX\_BUF\_DISABLE@{I2C\_MASTER\_TX\_BUF\_DISABLE}}
\index{I2C\_MASTER\_TX\_BUF\_DISABLE@{I2C\_MASTER\_TX\_BUF\_DISABLE}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{I2C\_MASTER\_TX\_BUF\_DISABLE}{I2C\_MASTER\_TX\_BUF\_DISABLE}}
{\footnotesize\ttfamily \#define I2\+C\+\_\+\+MASTER\+\_\+\+TX\+\_\+\+BUF\+\_\+\+DISABLE~0}

I2C master doesn\textquotesingle{}t need buffer \mbox{\Hypertarget{i2c_8c_ae20bf16f65c41237e2d620ef49890781}\label{i2c_8c_ae20bf16f65c41237e2d620ef49890781}} 
\index{i2c.c@{i2c.c}!NACK\_VAL@{NACK\_VAL}}
\index{NACK\_VAL@{NACK\_VAL}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{NACK\_VAL}{NACK\_VAL}}
{\footnotesize\ttfamily \#define NACK\+\_\+\+VAL~0x1}

I2C nack value \mbox{\Hypertarget{i2c_8c_a2f493ed233e66342493f155ebda5c183}\label{i2c_8c_a2f493ed233e66342493f155ebda5c183}} 
\index{i2c.c@{i2c.c}!READ\_BIT@{READ\_BIT}}
\index{READ\_BIT@{READ\_BIT}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{READ\_BIT}{READ\_BIT}}
{\footnotesize\ttfamily \#define READ\+\_\+\+BIT~I2\+C\+\_\+\+MASTER\+\_\+\+READ}

I2C master read \mbox{\Hypertarget{i2c_8c_a7fc57d5be9f588839a00c75ef2946e17}\label{i2c_8c_a7fc57d5be9f588839a00c75ef2946e17}} 
\index{i2c.c@{i2c.c}!WRITE\_BIT@{WRITE\_BIT}}
\index{WRITE\_BIT@{WRITE\_BIT}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{WRITE\_BIT}{WRITE\_BIT}}
{\footnotesize\ttfamily \#define WRITE\+\_\+\+BIT~I2\+C\+\_\+\+MASTER\+\_\+\+WRITE}

I2C master write 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{i2c_8c_af31f0b997d365cdd0ad925d2695ba398}\label{i2c_8c_af31f0b997d365cdd0ad925d2695ba398}} 
\index{i2c.c@{i2c.c}!i2cMasterInit@{i2cMasterInit}}
\index{i2cMasterInit@{i2cMasterInit}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{i2cMasterInit()}{i2cMasterInit()}}
{\footnotesize\ttfamily esp\+\_\+err\+\_\+t i2c\+Master\+Init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



i2c master initialization 

\begin{DoxyReturn}{Returns}
\+:
\begin{DoxyItemize}
\item ESP\+\_\+\+OK Success
\item ESP\+\_\+\+ERR\+\_\+\+INVALID\+\_\+\+ARG Parameter error
\item ESP\+\_\+\+FAIL Driver install error 
\end{DoxyItemize}
\end{DoxyReturn}
\texorpdfstring{$<$}{<} Internal GPIO pull mode for I2C sda signal

\texorpdfstring{$<$}{<} Internal GPIO pull mode for I2C scl signal\mbox{\Hypertarget{i2c_8c_a3067e350605188bfc92ad7e33564d4d5}\label{i2c_8c_a3067e350605188bfc92ad7e33564d4d5}} 
\index{i2c.c@{i2c.c}!MAX32664\_Config@{MAX32664\_Config}}
\index{MAX32664\_Config@{MAX32664\_Config}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{MAX32664\_Config()}{MAX32664\_Config()}}
{\footnotesize\ttfamily uint8\+\_\+t MAX32664\+\_\+\+Config (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Implements the necessary configurations in order to read HR+\+Sp\+O2. 

Implements the necessary configurations in order to read HR+\+Sp\+O2. Based on page 13 of \char`\"{}\+Measuring Heart Rate and Sp\+O2\+Using the MAX32664\+A –   A Quick \+Start Guide\char`\"{} \href{https://pdfserv.maximintegrated.com/en/an/ug7087-max32664a-quick-start-guide-rev-1-p1.pdf}{\texttt{ https\+://pdfserv.\+maximintegrated.\+com/en/an/ug7087-\/max32664a-\/quick-\/start-\/guide-\/rev-\/1-\/p1.\+pdf}}

\begin{DoxyReturn}{Returns}
\+:
\begin{DoxyItemize}
\item 0 Success
\item 1 Error 
\end{DoxyItemize}
\end{DoxyReturn}
\mbox{\Hypertarget{i2c_8c_a62e621e938b99bcd1762bb1dbaa92b57}\label{i2c_8c_a62e621e938b99bcd1762bb1dbaa92b57}} 
\index{i2c.c@{i2c.c}!MAX32664\_GetBPM@{MAX32664\_GetBPM}}
\index{MAX32664\_GetBPM@{MAX32664\_GetBPM}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{MAX32664\_GetBPM()}{MAX32664\_GetBPM()}}
{\footnotesize\ttfamily uint8\+\_\+t MAX32664\+\_\+\+Get\+BPM (\begin{DoxyParamCaption}\item[{uint16\+\_\+t $\ast$}]{heart\+\_\+rate,  }\item[{uint16\+\_\+t $\ast$}]{oxygen,  }\item[{uint8\+\_\+t $\ast$}]{confidence,  }\item[{uint8\+\_\+t $\ast$}]{status }\end{DoxyParamCaption})}



Reads the HR values from the MAX32664. 

Reads the HR+\+Sp\+O2 values from the MAX32664. Based on page 13 of \char`\"{}\+Measuring \+Heart Rate and Sp\+O2\+Using the MAX32664\+A –   A Quick Start Guide\char`\"{} \href{https://pdfserv.maximintegrated.com/en/an/ug7087-max32664a-quick-start-guide-rev-1-p1.pdf}{\texttt{ https\+://pdfserv.\+maximintegrated.\+com/en/an/ug7087-\/max32664a-\/quick-\/start-\/guide-\/rev-\/1-\/p1.\+pdf}}


\begin{DoxyParams}{Parameters}
{\em heart\+\_\+rate} & Pointer to the variable where the heart rate value will be stored.\\
\hline
{\em oxygen} & Pointer to the variable where the Sp\+O2 value will be stored.\\
\hline
{\em confidence} & Pointer to the variable where the confidence value will be stored.\\
\hline
{\em status} & Pointer to the variable where the status value will be stored.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\+:
\begin{DoxyItemize}
\item 0 Success
\item 1 Error 
\end{DoxyItemize}
\end{DoxyReturn}
\mbox{\Hypertarget{i2c_8c_aaf711ea2c9db8dbc43aa164c93b2a6ff}\label{i2c_8c_aaf711ea2c9db8dbc43aa164c93b2a6ff}} 
\index{i2c.c@{i2c.c}!MAX32664\_Init@{MAX32664\_Init}}
\index{MAX32664\_Init@{MAX32664\_Init}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{MAX32664\_Init()}{MAX32664\_Init()}}
{\footnotesize\ttfamily void MAX32664\+\_\+\+Init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



MAX32664 initialization. 

MAX32664 is a sensor that measures heart rate and Sp\+O2. It is connected to the ESP32 through the I2C bus. \mbox{\Hypertarget{i2c_8c_aba4c5527f6b1485d2479d67b42c375c1}\label{i2c_8c_aba4c5527f6b1485d2479d67b42c375c1}} 
\index{i2c.c@{i2c.c}!MAX32664\_SMBusRead@{MAX32664\_SMBusRead}}
\index{MAX32664\_SMBusRead@{MAX32664\_SMBusRead}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{MAX32664\_SMBusRead()}{MAX32664\_SMBusRead()}}
{\footnotesize\ttfamily int MAX32664\+\_\+\+SMBus\+Read (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{slave\+\_\+addr,  }\item[{uint8\+\_\+t}]{family\+\_\+byte,  }\item[{uint8\+\_\+t}]{index\+\_\+byte,  }\item[{uint8\+\_\+t}]{extra\+\_\+byte,  }\item[{uint8\+\_\+t}]{extra\+\_\+byte\+\_\+flag,  }\item[{uint8\+\_\+t $\ast$}]{rcv\+\_\+data,  }\item[{uint8\+\_\+t}]{rcv\+\_\+data\+\_\+size,  }\item[{uint8\+\_\+t}]{delay\+\_\+ms }\end{DoxyParamCaption})}



MAX32664 SMBus read function. 


\begin{DoxyParams}{Parameters}
{\em slave\+\_\+addr} & Slave address of the MAX32664. \\
\hline
{\em family\+\_\+byte} & Family byte of the command. \\
\hline
{\em index\+\_\+byte} & Index byte of the command. \\
\hline
{\em extra\+\_\+byte} & Extra byte of the command. \\
\hline
{\em extra\+\_\+byte\+\_\+flag} & Flag to indicate if the extra byte is used or not. \\
\hline
{\em rcv\+\_\+data} & Pointer to the buffer where the data will be stored. \\
\hline
{\em rcv\+\_\+data\+\_\+size} & Size of recieving data of interest. Normally the slave sends 1 byte for \char`\"{}\+Read status byte\char`\"{} followed by the data of interest (Total recieved bytes should be always more than 1 byte -\/\texorpdfstring{$>$}{>} status byte + data of interest)\\
\hline
{\em delay\+\_\+ms} & Delay in ms between the write and read commands.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\+:
\begin{DoxyItemize}
\item 0 Success
\item 1 Error 
\end{DoxyItemize}
\end{DoxyReturn}
\mbox{\Hypertarget{i2c_8c_ab23a0de89f7653802f6fa621e59a5d74}\label{i2c_8c_ab23a0de89f7653802f6fa621e59a5d74}} 
\index{i2c.c@{i2c.c}!MAX32664\_SMBusWrite@{MAX32664\_SMBusWrite}}
\index{MAX32664\_SMBusWrite@{MAX32664\_SMBusWrite}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{MAX32664\_SMBusWrite()}{MAX32664\_SMBusWrite()}}
{\footnotesize\ttfamily int MAX32664\+\_\+\+SMBus\+Write (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{slave\+\_\+addr,  }\item[{uint8\+\_\+t}]{family\+\_\+byte,  }\item[{uint8\+\_\+t}]{index\+\_\+byte,  }\item[{uint8\+\_\+t $\ast$}]{write\+\_\+data,  }\item[{uint8\+\_\+t}]{write\+\_\+data\+\_\+size,  }\item[{uint8\+\_\+t}]{delay\+\_\+ms }\end{DoxyParamCaption})}



MAX32664 SMBus write function. 


\begin{DoxyParams}{Parameters}
{\em slave\+\_\+addr} & Slave address of the MAX32664. \\
\hline
{\em family\+\_\+byte} & Family byte of the command. \\
\hline
{\em index\+\_\+byte} & Index byte of the command. \\
\hline
{\em write\+\_\+data} & Pointer to the buffer where the data to be written is stored.\\
\hline
{\em write\+\_\+data\+\_\+size} & Size of the data to be written.\\
\hline
{\em delay\+\_\+ms} & Delay in ms between the write and read commands.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\+:
\begin{DoxyItemize}
\item 0 Success
\item 1 Error 
\end{DoxyItemize}
\end{DoxyReturn}
\mbox{\Hypertarget{i2c_8c_a84d9791903d3f10d0918e15469b61b99}\label{i2c_8c_a84d9791903d3f10d0918e15469b61b99}} 
\index{i2c.c@{i2c.c}!MLX90614\_CalcPEC@{MLX90614\_CalcPEC}}
\index{MLX90614\_CalcPEC@{MLX90614\_CalcPEC}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{MLX90614\_CalcPEC()}{MLX90614\_CalcPEC()}}
{\footnotesize\ttfamily uint8\+\_\+t MLX90614\+\_\+\+Calc\+PEC (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{init\+PEC,  }\item[{uint8\+\_\+t}]{new\+Data }\end{DoxyParamCaption})}



Calculate PEC for MLX90614. 


\begin{DoxyParams}{Parameters}
{\em init\+PEC} & Initial PEC value. \\
\hline
{\em new\+Data} & New data to calculate PEC.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
PEC value. 
\end{DoxyReturn}
\mbox{\Hypertarget{i2c_8c_ab524e7ae80ce65702ddfb2b3d3a9979c}\label{i2c_8c_ab524e7ae80ce65702ddfb2b3d3a9979c}} 
\index{i2c.c@{i2c.c}!MLX90614\_GetTempAmb@{MLX90614\_GetTempAmb}}
\index{MLX90614\_GetTempAmb@{MLX90614\_GetTempAmb}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{MLX90614\_GetTempAmb()}{MLX90614\_GetTempAmb()}}
{\footnotesize\ttfamily int MLX90614\+\_\+\+Get\+Temp\+Amb (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{slave\+Addr,  }\item[{float $\ast$}]{temp\+\_\+amb,  }\item[{uint16\+\_\+t $\ast$}]{temp\+\_\+amb\+\_\+int }\end{DoxyParamCaption})}



Get ambient temperature from MLX90614. 


\begin{DoxyParams}{Parameters}
{\em slave\+\_\+addr} & Slave address of the MLX90614. \\
\hline
{\em temp\+\_\+amb} & Pointer to the variable where the ambient temperature will be stored.\\
\hline
{\em temp\+\_\+amb\+\_\+int} & Pointer to the variable where the ambient temperature in integer format will be stored.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\+:
\begin{DoxyItemize}
\item 0 Success
\item 1 Error 
\end{DoxyItemize}
\end{DoxyReturn}
\mbox{\Hypertarget{i2c_8c_a9940a5b0514467c6b38ac69486edc4ab}\label{i2c_8c_a9940a5b0514467c6b38ac69486edc4ab}} 
\index{i2c.c@{i2c.c}!MLX90614\_GetTempObj@{MLX90614\_GetTempObj}}
\index{MLX90614\_GetTempObj@{MLX90614\_GetTempObj}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{MLX90614\_GetTempObj()}{MLX90614\_GetTempObj()}}
{\footnotesize\ttfamily int MLX90614\+\_\+\+Get\+Temp\+Obj (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{slave\+Addr,  }\item[{float $\ast$}]{temp\+\_\+obj,  }\item[{uint16\+\_\+t $\ast$}]{temp\+\_\+obj\+\_\+int }\end{DoxyParamCaption})}



Get object temperature from MLX90614. 


\begin{DoxyParams}{Parameters}
{\em slave\+\_\+addr} & Slave address of the MLX90614. \\
\hline
{\em temp\+\_\+obj} & Pointer to the variable where the object temperature will be stored.\\
\hline
{\em temp\+\_\+obj\+\_\+int} & Pointer to the variable where the object temperature in integer format will be stored.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\+:
\begin{DoxyItemize}
\item 0 Success
\item 1 Error 
\end{DoxyItemize}
\end{DoxyReturn}
\mbox{\Hypertarget{i2c_8c_ae3171470c23d5e2358b750c0b94d9cd1}\label{i2c_8c_ae3171470c23d5e2358b750c0b94d9cd1}} 
\index{i2c.c@{i2c.c}!MLX90614\_SMBusRead@{MLX90614\_SMBusRead}}
\index{MLX90614\_SMBusRead@{MLX90614\_SMBusRead}!i2c.c@{i2c.c}}
\doxysubsubsection{\texorpdfstring{MLX90614\_SMBusRead()}{MLX90614\_SMBusRead()}}
{\footnotesize\ttfamily int MLX90614\+\_\+\+SMBus\+Read (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{slave\+Addr,  }\item[{uint8\+\_\+t}]{reg\+\_\+addr,  }\item[{uint16\+\_\+t $\ast$}]{data }\end{DoxyParamCaption})}



Read data from MLX90614. 


\begin{DoxyParams}{Parameters}
{\em slave\+\_\+addr} & Slave address of the MLX90614. \\
\hline
{\em reg\+\_\+addr} & Register address to read. \\
\hline
{\em data} & Pointer to the variable where the data will be stored.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\+:
\begin{DoxyItemize}
\item 0 Success
\item 1 Error 
\end{DoxyItemize}
\end{DoxyReturn}
